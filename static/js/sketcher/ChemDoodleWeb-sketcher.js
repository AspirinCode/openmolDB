//
// ChemDoodle Web Components 5.0.0
//
// http://web.chemdoodle.com
//
// Copyright 2009-2012 iChemLabs, LLC.  All rights reserved.
//
// This program is free software: you can redistribute it and/or modify
// it under the terms of the GNU General Public License as published by
// the Free Software Foundation, either version 3 of the License, or
// (at your option) any later version.
//
// As a special exception to the GPL, any HTML file in a public website
// or any free web service which merely makes function calls to this
// code, and for that purpose includes it by reference, shall be deemed
// a separate work for copyright law purposes. If you modify this code,
// you may extend this exception to your version of the code, but you
// are not obligated to do so. If you do not wish to do so, delete this
// exception statement from your version.
//
// As an additional exception to the GPL, you may distribute this
// packed form of the code without the copy of the GPL license normally
// required, provided you include this license notice and a URL through
// which recipients can access the corresponding unpacked source code.
//
// This program is distributed in the hope that it will be useful,
// but WITHOUT ANY WARRANTY; without even the implied warranty of
// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
// GNU General Public License for more details.
//
// Please contact iChemLabs <http://www.ichemlabs.com/contact> for
// alternate licensing options.
//
ChemDoodle.sketcher=function(){var a={actions:{},gui:{}};a.gui.desktop={};a.gui.mobile={};a.states={};a.tools={};return a}();(function(a){a._Action=function(){this.forward=function(a){this.innerForward();this.checks(a)};this.reverse=function(a){this.innerReverse();this.checks(a)};this.checks=function(a){for(var f=0,c=a.molecules.length;f<c;f++)a.molecules[f].check();a.lasso&&a.lasso.isActive()&&a.lasso.setBounds();a.repaint()};return!0}})(ChemDoodle.sketcher.actions);
(function(a,d,f,c){f.AddAction=function(e,b,a,j){this.sketcher=e;this.a=b;this.as=a;this.bs=j;return!0};f.AddAction.prototype=new f._Action;f.AddAction.prototype.innerForward=function(){var e=this.sketcher.getMoleculeByAtom(this.a);e||(e=new d.Molecule,this.sketcher.molecules.push(e));if(this.as)for(var b=0,a=this.as.length;b<a;b++)e.atoms.push(this.as[b]);if(this.bs){for(var j=[],b=0,a=this.bs.length;b<a;b++){var m=this.bs[b];if(-1===c(m.a1,e.atoms)){var g=this.sketcher.getMoleculeByAtom(m.a1);-1===
c(g,j)&&j.push(g)}-1===c(m.a2,e.atoms)&&(g=this.sketcher.getMoleculeByAtom(m.a2),-1===c(g,j)&&j.push(g));e.bonds.push(m)}b=0;for(a=j.length;b<a;b++)m=j[b],this.sketcher.removeMolecule(m),e.atoms=e.atoms.concat(m.atoms),e.bonds=e.bonds.concat(m.bonds)}};f.AddAction.prototype.innerReverse=function(){var e=this.sketcher.getMoleculeByAtom(this.a);if(this.as){for(var b=[],d=0,j=e.atoms.length;d<j;d++)-1===c(e.atoms[d],this.as)&&b.push(e.atoms[d]);e.atoms=b}if(this.bs){b=[];d=0;for(j=e.bonds.length;d<j;d++)-1===
c(e.bonds[d],this.bs)&&b.push(e.bonds[d]);e.bonds=b}if(0===e.atoms.length)this.sketcher.removeMolecule(e);else if(b=(new a.Splitter).split(e),1<b.length){this.sketcher.removeMolecule(e);d=0;for(j=b.length;d<j;d++)this.sketcher.molecules.push(b[d])}}})(ChemDoodle.informatics,ChemDoodle.structures,ChemDoodle.sketcher.actions,jQuery.inArray);
(function(a){a.AddShapeAction=function(a,f){this.sketcher=a;this.s=f;return!0};a.AddShapeAction.prototype=new a._Action;a.AddShapeAction.prototype.innerForward=function(){this.sketcher.shapes.push(this.s)};a.AddShapeAction.prototype.innerReverse=function(){this.sketcher.removeShape(this.s)}})(ChemDoodle.sketcher.actions);
(function(a,d){a.ChangeBondAction=function(a,c,e){this.b=a;this.orderBefore=a.bondOrder;this.stereoBefore=a.stereo;c?(this.orderAfter=c,this.stereoAfter=e):(this.orderAfter=a.bondOrder+1,3<this.orderAfter&&(this.orderAfter=1),this.stereoAfter=d.STEREO_NONE);return!0};a.ChangeBondAction.prototype=new a._Action;a.ChangeBondAction.prototype.innerForward=function(){this.b.bondOrder=this.orderAfter;this.b.stereo=this.stereoAfter};a.ChangeBondAction.prototype.innerReverse=function(){this.b.bondOrder=this.orderBefore;
this.b.stereo=this.stereoBefore}})(ChemDoodle.sketcher.actions,ChemDoodle.structures.Bond);(function(a){a.ChangeChargeAction=function(a,f){this.a=a;this.delta=f;return!0};a.ChangeChargeAction.prototype=new a._Action;a.ChangeChargeAction.prototype.innerForward=function(){this.a.charge+=this.delta};a.ChangeChargeAction.prototype.innerReverse=function(){this.a.charge-=this.delta}})(ChemDoodle.sketcher.actions);
(function(a){a.ChangeCoordinatesAction=function(a,f){this.as=a;this.recs=[];for(var c=0,e=this.as.length;c<e;c++)this.recs[c]={xo:this.as[c].x,yo:this.as[c].y,xn:f[c].x,yn:f[c].y};return!0};a.ChangeCoordinatesAction.prototype=new a._Action;a.ChangeCoordinatesAction.prototype.innerForward=function(){for(var a=0,f=this.as.length;a<f;a++)this.as[a].x=this.recs[a].xn,this.as[a].y=this.recs[a].yn};a.ChangeCoordinatesAction.prototype.innerReverse=function(){for(var a=0,f=this.as.length;a<f;a++)this.as[a].x=
this.recs[a].xo,this.as[a].y=this.recs[a].yo}})(ChemDoodle.sketcher.actions);(function(a){a.ChangeLabelAction=function(a,f){this.a=a;this.before=a.label;this.after=f;return!0};a.ChangeLabelAction.prototype=new a._Action;a.ChangeLabelAction.prototype.innerForward=function(){this.a.label=this.after};a.ChangeLabelAction.prototype.innerReverse=function(){this.a.label=this.before}})(ChemDoodle.sketcher.actions);
(function(a){a.ChangeLonePairAction=function(a,f){this.a=a;this.delta=f;return!0};a.ChangeLonePairAction.prototype=new a._Action;a.ChangeLonePairAction.prototype.innerForward=function(){this.a.numLonePair+=this.delta};a.ChangeLonePairAction.prototype.innerReverse=function(){this.a.numLonePair-=this.delta}})(ChemDoodle.sketcher.actions);
(function(a){a.ChangeRadicalAction=function(a,f){this.a=a;this.delta=f;return!0};a.ChangeRadicalAction.prototype=new a._Action;a.ChangeRadicalAction.prototype.innerForward=function(){this.a.numRadical+=this.delta};a.ChangeRadicalAction.prototype.innerReverse=function(){this.a.numRadical-=this.delta}})(ChemDoodle.sketcher.actions);
(function(a){a.ChangeRgroupAction=function(a,f){this.a=a;this.rbefore=a.rgroup;this.rafter=f;return!0};a.ChangeRgroupAction.prototype=new a._Action;a.ChangeRgroupAction.prototype.innerForward=function(){this.a.rgroup=this.rafter};a.ChangeRgroupAction.prototype.innerReverse=function(){this.a.rgroup=this.rbefore}})(ChemDoodle.sketcher.actions);
(function(a,d){d.ClearAction=function(d){this.sketcher=d;this.beforeMols=this.sketcher.molecules;this.beforeShapes=this.sketcher.shapes;this.sketcher.clear();this.sketcher.oneMolecule&&(this.afterMol=new a.Molecule,this.afterMol.atoms.push(new a.Atom),this.sketcher.molecules.push(this.afterMol),this.sketcher.center(),this.sketcher.repaint());return!0};d.ClearAction.prototype=new d._Action;d.ClearAction.prototype.innerForward=function(){this.sketcher.molecules=[];this.sketcher.shapes=[];this.sketcher.oneMolecule&&
this.sketcher.molecules.push(this.afterMol)};d.ClearAction.prototype.innerReverse=function(){this.sketcher.molecules=this.beforeMols;this.sketcher.shapes=this.beforeShapes}})(ChemDoodle.structures,ChemDoodle.sketcher.actions);
(function(a){a.DeleteAction=function(a,f,c,e){this.sketcher=a;this.a=f;this.as=c;this.bs=e;this.ss=[];return!0};a.DeleteAction.prototype=new a._Action;a.DeleteAction.prototype.innerForwardAReverse=a.AddAction.prototype.innerReverse;a.DeleteAction.prototype.innerReverseAForward=a.AddAction.prototype.innerForward;a.DeleteAction.prototype.innerForward=function(){this.innerForwardAReverse();for(var a=0,f=this.ss.length;a<f;a++)this.sketcher.removeShape(this.ss[a])};a.DeleteAction.prototype.innerReverse=
function(){this.innerReverseAForward();0<this.ss.length&&(this.sketcher.shapes=this.sketcher.shapes.concat(this.ss))}})(ChemDoodle.sketcher.actions);
(function(a,d,f){d.DeleteContentAction=function(a,e,b){this.sketcher=a;this.as=e;this.ss=b;this.bs=[];a=0;for(e=this.sketcher.molecules.length;a<e;a++)for(var b=this.sketcher.molecules[a],d=0,j=b.bonds.length;d<j;d++){var m=b.bonds[d];m.a1.isLassoed&&m.a2.isLassoed&&this.bs.push(m)}return!0};d.DeleteContentAction.prototype=new d._Action;d.DeleteContentAction.prototype.innerForward=function(){for(var c=0,e=this.ss.length;c<e;c++)this.sketcher.removeShape(this.ss[c]);for(var b=[],d=[],c=0,e=this.sketcher.molecules.length;c<
e;c++){for(var j=this.sketcher.molecules[c],m=0,g=j.atoms.length;m<g;m++){var l=j.atoms[m];-1===f(l,this.as)&&b.push(l)}m=0;for(g=j.bonds.length;m<g;m++)l=j.bonds[m],-1===f(l,this.bs)&&d.push(l)}this.sketcher.molecules=(new a.Splitter).split({atoms:b,bonds:d})};d.DeleteContentAction.prototype.innerReverse=function(){this.sketcher.shapes=this.sketcher.shapes.concat(this.ss);for(var c=[],e=[],b=0,d=this.sketcher.molecules.length;b<d;b++)var j=this.sketcher.molecules[b],c=c.concat(j.atoms),e=e.concat(j.bonds);
this.sketcher.molecules=(new a.Splitter).split({atoms:c.concat(this.as),bonds:e.concat(this.bs)})}})(ChemDoodle.informatics,ChemDoodle.sketcher.actions,jQuery.inArray);(function(a){a.DeleteShapeAction=function(a,f){this.sketcher=a;this.s=f;return!0};a.DeleteShapeAction.prototype=new a._Action;a.DeleteShapeAction.prototype.innerForward=a.AddShapeAction.prototype.innerReverse;a.DeleteShapeAction.prototype.innerReverse=a.AddShapeAction.prototype.innerForward})(ChemDoodle.sketcher.actions);
(function(a){a.FlipBondAction=function(a){this.b=a;return!0};a.FlipBondAction.prototype=new a._Action;a.FlipBondAction.prototype.innerForward=function(){var a=this.b.a1;this.b.a1=this.b.a2;this.b.a2=a};a.FlipBondAction.prototype.innerReverse=function(){this.innerForward()}})(ChemDoodle.sketcher.actions);
(function(a){a.MoveAction=function(a,f){this.ps=a;this.dif=f;return!0};a.MoveAction.prototype=new a._Action;a.MoveAction.prototype.innerForward=function(){for(var a=0,f=this.ps.length;a<f;a++)this.ps[a].add(this.dif)};a.MoveAction.prototype.innerReverse=function(){for(var a=0,f=this.ps.length;a<f;a++)this.ps[a].sub(this.dif)}})(ChemDoodle.sketcher.actions);
(function(a,d){d.NewMoleculeAction=function(a,c,e){this.sketcher=a;this.as=c;this.bs=e;return!0};d.NewMoleculeAction.prototype=new d._Action;d.NewMoleculeAction.prototype.innerForward=function(){var d=new a.Molecule;d.atoms=d.atoms.concat(this.as);d.bonds=d.bonds.concat(this.bs);d.check();this.sketcher.addMolecule(d)};d.NewMoleculeAction.prototype.innerReverse=function(){this.sketcher.removeMolecule(this.sketcher.getMoleculeByAtom(this.as[0]))}})(ChemDoodle.structures,ChemDoodle.sketcher.actions);
(function(a,d){a.RotateAction=function(a,c,e){this.ps=a;this.dif=c;this.center=e;return!0};a.RotateAction.prototype=new a._Action;a.RotateAction.prototype.innerForward=function(){for(var a=0,c=this.ps.length;a<c;a++){var e=this.ps[a],b=this.center.distance(e),h=this.center.angle(e)+this.dif;e.x=this.center.x+b*d.cos(h);e.y=this.center.y-b*d.sin(h)}};a.RotateAction.prototype.innerReverse=function(){for(var a=0,c=this.ps.length;a<c;a++){var e=this.ps[a],b=this.center.distance(e),h=this.center.angle(e)-
this.dif;e.x=this.center.x+b*d.cos(h);e.y=this.center.y-b*d.sin(h)}}})(ChemDoodle.sketcher.actions,Math);
(function(a){a.SwitchMoleculeAction=function(a,f){this.sketcher=a;this.beforeMols=this.sketcher.molecules;this.beforeShapes=this.sketcher.shapes;this.molA=f;return!0};a.SwitchMoleculeAction.prototype=new a._Action;a.SwitchMoleculeAction.prototype.innerForward=function(){this.sketcher.loadMolecule(this.molA)};a.SwitchMoleculeAction.prototype.innerReverse=function(){this.sketcher.molecules=this.beforeMols;this.sketcher.shapes=this.beforeShapes}})(ChemDoodle.sketcher.actions);
(function(a){a.ToggleAnyAtomAction=function(a){this.a=a;return!0};a.ToggleAnyAtomAction.prototype=new a._Action;a.ToggleAnyAtomAction.prototype.innerForward=function(){this.a.any=!this.a.any};a.ToggleAnyAtomAction.prototype.innerReverse=a.ToggleAnyAtomAction.prototype.innerForward})(ChemDoodle.sketcher.actions);
(function(a){a.HistoryManager=function(a){this.sketcher=a;this.undoStack=[];this.redoStack=[];return!0};a.HistoryManager.prototype.undo=function(){if(0!==this.undoStack.length){this.sketcher.lasso&&this.sketcher.lasso.isActive()&&this.sketcher.lasso.empty();var a=this.undoStack.pop();a.reverse(this.sketcher);this.redoStack.push(a);0===this.undoStack.length&&this.sketcher.toolbarManager.buttonUndo.disable();this.sketcher.toolbarManager.buttonRedo.enable()}};a.HistoryManager.prototype.redo=function(){if(0!==
this.redoStack.length){this.sketcher.lasso&&this.sketcher.lasso.isActive()&&this.sketcher.lasso.empty();var a=this.redoStack.pop();a.forward(this.sketcher);this.undoStack.push(a);this.sketcher.toolbarManager.buttonUndo.enable();0===this.redoStack.length&&this.sketcher.toolbarManager.buttonRedo.disable()}};a.HistoryManager.prototype.pushUndo=function(a){a.forward(this.sketcher);this.undoStack.push(a);0!==this.redoStack.length&&(this.redoStack=[]);this.sketcher.toolbarManager.buttonUndo.enable();this.sketcher.toolbarManager.buttonRedo.disable()};
a.HistoryManager.prototype.clear=function(){0!==this.undoStack.length&&(this.undoStack=[],this.sketcher.toolbarManager.buttonUndo.disable());0!==this.redoStack.length&&(this.redoStack=[],this.sketcher.toolbarManager.buttonRedo.disable())}})(ChemDoodle.sketcher.actions);
(function(a,d,f,c,e,b,h,j){c._State=function(){return!0};c._State.prototype.setup=function(a){this.sketcher=a};c._State.prototype.clearHover=function(){this.sketcher.hovering&&(this.sketcher.hovering.isHover=!1,this.sketcher.hovering.isSelected=!1,this.sketcher.hovering=void 0)};c._State.prototype.findHoveredObject=function(a,g,e,b){this.clearHover();var i=Infinity,j,c=this.sketcher.specs.bondLength;this.sketcher.isMobile||(c/=this.sketcher.specs.scale);if(g)for(var g=0,d=this.sketcher.molecules.length;g<
d;g++)for(var h=this.sketcher.molecules[g],f=0,r=h.atoms.length;f<r;f++){var v=h.atoms[f];v.isHover=!1;var t=a.p.distance(v);t<c&&t<i&&(i=t,j=v)}if(e){g=0;for(d=this.sketcher.molecules.length;g<d;g++){h=this.sketcher.molecules[g];f=0;for(r=h.bonds.length;f<r;f++)e=h.bonds[f],e.isHover=!1,t=a.p.distance(e.getCenter()),t<c&&t<i&&(i=t,j=e)}}if(b){g=0;for(d=this.sketcher.shapes.length;g<d;g++){b=this.sketcher.shapes[g];b.isHover=!1;b.hoverPoint=void 0;e=b.getPoints();f=0;for(r=e.length;f<r;f++)h=e[f],
t=a.p.distance(h),t<c&&t<i&&(i=t,j=b,b.hoverPoint=h)}if(!j){g=0;for(d=this.sketcher.shapes.length;g<d;g++)b=this.sketcher.shapes[g],b.isOver(a.p,c)&&(j=b)}}j&&(j.isHover=!0,this.sketcher.hovering=j)};c._State.prototype.getOptimumAngle=function(e){var g=this.sketcher.getMoleculeByAtom(e),e=g.getAngles(e),b=0;if(0===e.length)b=j.PI/6;else if(1===e.length){for(var c,b=0,i=g.bonds.length;b<i;b++)g.bonds[b].contains(this.sketcher.hovering)&&(c=g.bonds[b]);3<=c.bondOrder?b=e[0]+j.PI:(g=2*(e[0]%j.PI),b=
a.isBetween(g,0,j.PI/2)||a.isBetween(g,j.PI,3*j.PI/2)?e[0]+2*j.PI/3:e[0]-2*j.PI/3)}else b=a.angleBetweenLargest(e).angle;return b};c._State.prototype.removeStartAtom=function(){this.sketcher.startAtom&&(this.sketcher.startAtom.x=-10,this.sketcher.startAtom.y=-10,this.sketcher.repaint())};c._State.prototype.enter=function(){this.innerenter&&this.innerenter()};c._State.prototype.exit=function(){this.innerexit&&this.innerexit()};c._State.prototype.click=function(a){this.innerclick&&this.innerclick(a)};
c._State.prototype.rightclick=function(a){this.innerrightclick&&this.innerrightclick(a)};c._State.prototype.dblclick=function(a){this.innerdblclick&&this.innerdblclick(a);if(!this.sketcher.hovering){var a=new e.Point(this.sketcher.width/2,this.sketcher.height/2),g=this.sketcher.getContentBounds();a.x-=(g.maxX+g.minX)/2;a.y-=(g.maxY+g.minY)/2;this.sketcher.historyManager.pushUndo(new f.MoveAction(this.sketcher.getAllPoints(),a))}};c._State.prototype.mousedown=function(a){this.sketcher.lastPoint=a.p;
this.sketcher.isHelp||this.sketcher.isMobile&&10>a.op.distance(this.sketcher.helpPos)?(this.sketcher.isHelp=!1,this.sketcher.repaint(),window.open("http://web.chemdoodle.com/sketcher")):this.innermousedown&&this.innermousedown(a)};c._State.prototype.rightmousedown=function(a){this.innerrightmousedown&&this.innerrightmousedown(a)};c._State.prototype.mousemove=function(a){this.innermousemove&&this.innermousemove(a);this.sketcher.repaint()};c._State.prototype.mouseout=function(a){this.innermouseout&&
this.innermouseout(a)};c._State.prototype.mouseover=function(a){this.innermouseover&&this.innermouseover(a)};c._State.prototype.mouseup=function(a){this.parentAction=void 0;this.innermouseup&&this.innermouseup(a)};c._State.prototype.rightmouseup=function(a){this.innerrightmouseup&&this.innerrightmouseup(a)};c._State.prototype.mousewheel=function(a,e){this.innermousewheel&&this.innermousewheel(a);this.sketcher.specs.scale+=e/10;this.sketcher.checkScale();this.sketcher.repaint()};c._State.prototype.drag=
function(a){this.innerdrag&&this.innerdrag(a);if(!this.sketcher.hovering&&this!==this.sketcher.stateManager.STATE_LASSO&&this!==this.sketcher.stateManager.STATE_SHAPE&&this!==this.sketcher.stateManager.STATE_PUSHER){if(d.SHIFT)if(this.parentAction){var g=this.parentAction.center,b=g.angle(this.sketcher.lastPoint),c=g.angle(a.p),i=c-b;this.parentAction.dif+=i;b=0;for(c=this.parentAction.ps.length;b<c;b++){var h=this.parentAction.ps[b],k=g.distance(h),p=g.angle(h)+i;h.x=g.x+k*j.cos(p);h.y=g.y-k*j.sin(p)}b=
0;for(c=this.sketcher.molecules.length;b<c;b++)this.sketcher.molecules[b].check()}else g=new e.Point(this.sketcher.width/2,this.sketcher.height/2),b=g.angle(this.sketcher.lastPoint),c=g.angle(a.p),this.parentAction=new f.RotateAction(this.sketcher.getAllPoints(),c-b,g),this.sketcher.historyManager.pushUndo(this.parentAction);else{if(!this.sketcher.lastPoint)return;g=new e.Point(a.p.x,a.p.y);g.sub(this.sketcher.lastPoint);if(this.parentAction){this.parentAction.dif.add(g);b=0;for(c=this.parentAction.ps.length;b<
c;b++)this.parentAction.ps[b].add(g);this.sketcher.lasso&&this.sketcher.lasso.isActive()&&(this.sketcher.lasso.bounds.minX+=g.x,this.sketcher.lasso.bounds.maxX+=g.x,this.sketcher.lasso.bounds.minY+=g.y,this.sketcher.lasso.bounds.maxY+=g.y);b=0;for(c=this.sketcher.molecules.length;b<c;b++)this.sketcher.molecules[b].check()}else this.parentAction=new f.MoveAction(this.sketcher.getAllPoints(),g),this.sketcher.historyManager.pushUndo(this.parentAction)}this.sketcher.repaint()}this.sketcher.lastPoint=
a.p};c._State.prototype.keydown=function(c){if(d.CANVAS_DRAGGING===this.sketcher)this.sketcher.lastPoint&&(c.p=this.sketcher.lastPoint,this.drag(c));else if(d.META)90===c.which?this.sketcher.historyManager.undo():89===c.which?this.sketcher.historyManager.redo():83===c.which?this.sketcher.toolbarManager.buttonSave.getElement().click():79===c.which?this.sketcher.toolbarManager.buttonOpen.getElement().click():78===c.which?this.sketcher.toolbarManager.buttonClear.getElement().click():187===c.which||61===
c.which?this.sketcher.toolbarManager.buttonScalePlus.getElement().click():189===c.which||109===c.which?this.sketcher.toolbarManager.buttonScaleMinus.getElement().click():65===c.which&&!this.sketcher.oneMolecule&&(this.sketcher.toolbarManager.buttonLasso.getElement().click(),this.sketcher.lasso.select(this.sketcher.getAllAtoms(),this.sketcher.shapes));else if(9===c.which){if(!this.sketcher.oneMolecule)if(this.sketcher.lasso.block=!0,this.sketcher.toolbarManager.buttonLasso.getElement().click(),this.sketcher.lasso.block=
!1,d.SHIFT){if(0<this.sketcher.shapes.length){var g=this.sketcher.shapes.length-1;0<this.sketcher.lasso.shapes.length&&(g=h(this.sketcher.lasso.shapes[0],this.sketcher.shapes)+1);g===this.sketcher.shapes.length&&(g=0);this.sketcher.lasso.empty();this.sketcher.lasso.select([],[this.sketcher.shapes[g]])}}else 0<this.sketcher.molecules.length&&(g=this.sketcher.molecules.length-1,0<this.sketcher.lasso.atoms.length&&(g=this.sketcher.getMoleculeByAtom(this.sketcher.lasso.atoms[0]),g=h(g,this.sketcher.molecules)+
1),g===this.sketcher.molecules.length&&(g=0),this.sketcher.lasso.select(this.sketcher.molecules[g].atoms,[]))}else if(32===c.which)this.sketcher.lasso&&this.sketcher.lasso.empty(),this.sketcher.toolbarManager.buttonSingle.getElement().click();else if(37<=c.which&&40>=c.which){g=new e.Point;switch(c.which){case 37:g.x=-10;break;case 38:g.y=-10;break;case 39:g.x=10;break;case 40:g.y=10}this.sketcher.historyManager.pushUndo(new f.MoveAction(this.sketcher.lasso&&this.sketcher.lasso.isActive()?this.sketcher.lasso.getAllPoints():
this.sketcher.getAllPoints(),g))}else if(187===c.which||189===c.which||61===c.which||109===c.which)this.sketcher.hovering&&this.sketcher.hovering instanceof e.Atom&&this.sketcher.historyManager.pushUndo(new f.ChangeChargeAction(this.sketcher.hovering,187===c.which||61===c.which?1:-1));else if(8===c.which||127===c.which)this.sketcher.stateManager.STATE_ERASE.handleDelete();else if(48<=c.which&&57>=c.which){if(this.sketcher.hovering){var l=c.which-48,n=[],i=[];if(this.sketcher.hovering instanceof e.Atom)if(g=
this.sketcher.hovering,d.SHIFT){if(2<l&&9>l){var o=this.sketcher.getMoleculeByAtom(this.sketcher.hovering),k=o.getAngles(this.sketcher.hovering),p=3*j.PI/2;0!==k.length&&(p=a.angleBetweenLargest(k).angle);k=this.sketcher.stateManager.STATE_NEW_RING.getRing(this.sketcher.hovering,l,this.sketcher.specs.bondLength,p,!1);-1===h(k[0],o.atoms)&&n.push(k[0]);this.sketcher.bondExists(this.sketcher.hovering,k[0])||i.push(new e.Bond(this.sketcher.hovering,k[0]));for(var q=1,s=k.length;q<s;q++)-1===h(k[q],o.atoms)&&
n.push(k[q]),this.sketcher.bondExists(k[q-1],k[q])||i.push(new e.Bond(k[q-1],k[q]));this.sketcher.bondExists(k[k.length-1],this.sketcher.hovering)||i.push(new e.Bond(k[k.length-1],this.sketcher.hovering))}}else{0===l&&(l=10);for(var r=new e.Point(this.sketcher.hovering.x,this.sketcher.hovering.y),v=this.getOptimumAngle(this.sketcher.hovering),t=this.sketcher.hovering,w=0;w<l;w++){o=v+(1===w%2?j.PI/3:0);r.x+=this.sketcher.specs.bondLength*j.cos(o);r.y-=this.sketcher.specs.bondLength*j.sin(o);for(var u=
new e.Atom("C",r.x,r.y),x=Infinity,y,q=0,s=this.sketcher.molecules.length;q<s;q++){o=this.sketcher.molecules[q];k=0;for(p=o.atoms.length;k<p;k++){var z=o.atoms[k],A=z.distance(u);A<x&&(x=A,y=z)}}5>x?u=y:n.push(u);this.sketcher.bondExists(t,u)||i.push(new e.Bond(t,u));t=u}}else if(this.sketcher.hovering instanceof e.Bond)if(g=this.sketcher.hovering.a1,d.SHIFT){if(2<l&&9>l){k=this.sketcher.stateManager.STATE_NEW_RING.getOptimalRing(this.sketcher.hovering,l);l=this.sketcher.hovering.a2;p=this.sketcher.hovering.a1;
o=this.sketcher.getMoleculeByAtom(l);k[0]===this.sketcher.hovering.a1&&(l=this.sketcher.hovering.a1,p=this.sketcher.hovering.a2);-1===h(k[1],o.atoms)&&n.push(k[1]);this.sketcher.bondExists(l,k[1])||i.push(new e.Bond(l,k[1]));q=2;for(s=k.length;q<s;q++)-1===h(k[q],o.atoms)&&n.push(k[q]),this.sketcher.bondExists(k[q-1],k[q])||i.push(new e.Bond(k[q-1],k[q]));this.sketcher.bondExists(k[k.length-1],p)||i.push(new e.Bond(k[k.length-1],p))}}else 0<l&&4>l&&this.sketcher.hovering.bondOrder!==l&&this.sketcher.historyManager.pushUndo(new f.ChangeBondAction(this.sketcher.hovering,
l,e.Bond.STEREO_NONE));(0!==n.length||0!==i.length)&&this.sketcher.historyManager.pushUndo(new f.AddAction(this.sketcher,g,n,i))}}else if(65<=c.which&&90>=c.which&&this.sketcher.hovering)if(this.sketcher.hovering instanceof e.Atom){g=String.fromCharCode(c.which);o=!1;k=0;for(p=b.length;k<p;k++)if(this.sketcher.hovering.label.charAt(0)===g)b[k]===this.sketcher.hovering.label?o=!0:b[k].charAt(0)===g&&(o&&!i?i=b[k]:n||(n=b[k]));else if(b[k].charAt(0)===g){n=b[k];break}u="C";i?u=i:n&&(u=n);u!==this.sketcher.hovering.label&&
this.sketcher.historyManager.pushUndo(new f.ChangeLabelAction(this.sketcher.hovering,u))}else this.sketcher.hovering instanceof e.Bond&&70===c.which&&this.sketcher.historyManager.pushUndo(new f.FlipBondAction(this.sketcher.hovering));this.innerkeydown&&this.innerkeydown(c)};c._State.prototype.keypress=function(a){this.innerkeypress&&this.innerkeypress(a)};c._State.prototype.keyup=function(a){d.CANVAS_DRAGGING===this.sketcher&&this.sketcher.lastPoint&&(a.p=this.sketcher.lastPoint,this.sketcher.drag(a));
this.innerkeyup&&this.innerkeyup(a)}})(ChemDoodle.math,ChemDoodle.monitor,ChemDoodle.sketcher.actions,ChemDoodle.sketcher.states,ChemDoodle.structures,ChemDoodle.SYMBOLS,jQuery.inArray,Math);
(function(a,d,f,c){c.AtomQueryState=function(a){this.setup(a);this.mode=c.LabelState.MODE_ANY;return!0};c.AtomQueryState.prototype=new c._State;c.AtomQueryState.prototype.innermouseup=function(){if(this.mode===c.AtomQueryState.MODE_ANY)this.sketcher.historyManager.pushUndo(new d.ToggleAnyAtomAction(this.sketcher.hovering));else if(this.mode===c.AtomQueryState.MODE_RGROUP){var a=this,b=this.sketcher.hovering;this.sketcher.dialogManager.inputDialog.doneFunction=function(c){c.match(/[0-9]|\-/g)&&a.sketcher.historyManager.pushUndo(new d.ChangeRgroupAction(b,
parseInt(c)))};this.sketcher.dialogManager.inputDialog.getElement().dialog("open")}};c.AtomQueryState.prototype.innermousemove=function(a){this.findHoveredObject(a,!0)};c.AtomQueryState.MODE_ANY=1;c.AtomQueryState.MODE_RGROUP=2})(ChemDoodle.structures,ChemDoodle.sketcher.actions,ChemDoodle.sketcher.gui.DialogManager,ChemDoodle.sketcher.states);
(function(a,d){d.ChargeState=function(a){this.setup(a);this.delta=1;return!0};d.ChargeState.prototype=new d._State;d.ChargeState.prototype.innermouseup=function(){this.sketcher.hovering&&this.sketcher.historyManager.pushUndo(new a.ChangeChargeAction(this.sketcher.hovering,this.delta))};d.ChargeState.prototype.innermousemove=function(a){this.findHoveredObject(a,!0,!1)}})(ChemDoodle.sketcher.actions,ChemDoodle.sketcher.states);
(function(a,d,f,c,e){d.EraseState=function(a){this.setup(a);return!0};d.EraseState.prototype=new d._State;d.EraseState.prototype.handleDelete=function(){if(this.sketcher.lasso&&this.sketcher.lasso.isActive())this.sketcher.historyManager.pushUndo(new a.DeleteContentAction(this.sketcher,this.sketcher.lasso.atoms,this.sketcher.lasso.shapes)),this.sketcher.lasso.empty();else if(this.sketcher.hovering){if(this.sketcher.hovering instanceof f.Atom)if(this.sketcher.oneMolecule){for(var b=this.sketcher.molecules[0],
h=0,j=b.atoms.length;h<j;h++)b.atoms[h].visited=!1;var d=[],g=[];this.sketcher.hovering.visited=!0;h=0;for(j=b.bonds.length;h<j;h++){var l=b.bonds[h];if(l.contains(this.sketcher.hovering)){var n=[],i=[],o=new f.Queue;for(o.enqueue(l.getNeighbor(this.sketcher.hovering));!o.isEmpty();)if(l=o.dequeue(),!l.visited){l.visited=!0;n.push(l);for(var k=0,p=b.bonds.length;k<p;k++){var q=b.bonds[k];q.contains(l)&&!q.getNeighbor(l).visited&&(o.enqueue(q.getNeighbor(l)),i.push(q))}}d.push(n);g.push(i)}}k=l=-1;
h=0;for(j=d.length;h<j;h++)d[h].length>l&&(k=h,l=d[h].length);if(-1<k){for(var h=[],j=[],s,n=0,i=b.atoms.length;n<i;n++)l=b.atoms[n],-1===e(l,d[k])?h.push(l):s||(s=l);n=0;for(i=b.bonds.length;n<i;n++)l=b.bonds[n],-1===e(l,g[k])&&j.push(l);this.sketcher.historyManager.pushUndo(new a.DeleteAction(this.sketcher,s,h,j))}else this.sketcher.historyManager.pushUndo(new a.ClearAction(this.sketcher))}else b=this.sketcher.getMoleculeByAtom(this.sketcher.hovering),this.sketcher.historyManager.pushUndo(new a.DeleteAction(this.sketcher,
b.atoms[0],[this.sketcher.hovering],b.getBonds(this.sketcher.hovering)));else this.sketcher.hovering instanceof f.Bond?(!this.sketcher.oneMolecule||!this.sketcher.hovering.ring)&&this.sketcher.historyManager.pushUndo(new a.DeleteAction(this.sketcher,this.sketcher.hovering.a1,void 0,[this.sketcher.hovering])):this.sketcher.hovering instanceof c._Shape&&this.sketcher.historyManager.pushUndo(new a.DeleteShapeAction(this.sketcher,this.sketcher.hovering));this.sketcher.hovering=void 0;this.sketcher.repaint()}n=
0;for(i=this.sketcher.shapes.length;n<i;n++)if(g=this.sketcher.shapes[n],g instanceof c.Pusher){d=s=!1;h=0;for(j=this.sketcher.molecules.length;h<j;h++){b=this.sketcher.molecules[h];k=0;for(p=b.atoms.length;k<p;k++)l=b.atoms[k],l===g.o1?s=!0:l===g.o2&&(d=!0);k=0;for(p=b.bonds.length;k<p;k++)l=b.bonds[k],l===g.o1?s=!0:l===g.o2&&(d=!0)}if(!s||!d)this.sketcher.historyManager.undoStack[this.sketcher.historyManager.undoStack.length-1].ss.push(g),this.sketcher.removeShape(g)}};d.EraseState.prototype.innermouseup=
function(){this.handleDelete()};d.EraseState.prototype.innermousemove=function(a){this.findHoveredObject(a,!0,!0)}})(ChemDoodle.sketcher.actions,ChemDoodle.sketcher.states,ChemDoodle.structures,ChemDoodle.structures.d2,jQuery.inArray);
(function(a,d,f){f.LabelState=function(a){this.setup(a);this.label="C";return!0};f.LabelState.prototype=new f._State;f.LabelState.prototype.innermousedown=function(){this.newMolAllowed=!0};f.LabelState.prototype.innermouseup=function(c){this.sketcher.hovering?this.label!==this.sketcher.hovering.label&&this.sketcher.historyManager.pushUndo(new d.ChangeLabelAction(this.sketcher.hovering,this.label)):!this.sketcher.oneMolecule&&this.newMolAllowed&&(this.sketcher.historyManager.pushUndo(new d.NewMoleculeAction(this.sketcher,
[new a.Atom(this.label,c.p.x,c.p.y)],[])),this.sketcher.isMobile||this.mousemove(c))};f.LabelState.prototype.innermousemove=function(a){this.findHoveredObject(a,!0,!1)};f.LabelState.prototype.innerdrag=function(){this.newMolAllowed=!1}})(ChemDoodle.structures,ChemDoodle.sketcher.actions,ChemDoodle.sketcher.states);
(function(a,d,f,c,e,b,h,j){b.LassoState=function(a){this.setup(a);return!0};b.LassoState.prototype=new b._State;var m,g=!1;b.LassoState.prototype.innerdrag=function(a){this.inDrag=!0;if(this.sketcher.lasso.isActive()&&m){if(this.sketcher.lastPoint)if(1===m){var b=new f.Point(a.p.x,a.p.y);b.sub(this.sketcher.lastPoint);if(this.parentAction){this.parentAction.dif.add(b);for(var a=0,i=this.parentAction.ps.length;a<i;a++)this.parentAction.ps[a].add(b);a=0;for(i=this.sketcher.molecules.length;a<i;a++)this.sketcher.molecules[a].check();
this.sketcher.lasso.bounds.minX+=b.x;this.sketcher.lasso.bounds.maxX+=b.x;this.sketcher.lasso.bounds.minY+=b.y;this.sketcher.lasso.bounds.maxY+=b.y;this.sketcher.repaint()}else this.parentAction=new e.MoveAction(this.sketcher.lasso.getAllPoints(),b),this.sketcher.historyManager.pushUndo(this.parentAction)}else if(2===m)if(this.parentAction){var b=this.parentAction.center,i=b.angle(this.sketcher.lastPoint),a=b.angle(a.p),g=a-i;this.parentAction.dif+=g;a=0;for(i=this.parentAction.ps.length;a<i;a++){var h=
this.parentAction.ps[a],p=b.distance(h),q=b.angle(h)+g;h.x=b.x+p*j.cos(q);h.y=b.y-p*j.sin(q)}a=0;for(i=this.sketcher.molecules.length;a<i;a++)this.sketcher.molecules[a].check();this.sketcher.lasso.setBounds();this.sketcher.repaint()}else b=new f.Point((this.sketcher.lasso.bounds.minX+this.sketcher.lasso.bounds.maxX)/2,(this.sketcher.lasso.bounds.minY+this.sketcher.lasso.bounds.maxY)/2),i=b.angle(this.sketcher.lastPoint),a=b.angle(a.p),this.parentAction=new e.RotateAction(this.sketcher.lasso.getAllPoints(),
a-i,b),this.sketcher.historyManager.pushUndo(this.parentAction)}else if(this.sketcher.hovering){if(this.sketcher.lastPoint)if(b=new f.Point(a.p.x,a.p.y),b.sub(this.sketcher.lastPoint),this.parentAction){this.parentAction.dif.add(b);a=0;for(i=this.parentAction.ps.length;a<i;a++)this.parentAction.ps[a].add(b);a=0;for(i=this.sketcher.molecules.length;a<i;a++)this.sketcher.molecules[a].check();this.sketcher.repaint()}else this.sketcher.hovering instanceof f.Atom?i=d.SHIFT?[this.sketcher.hovering]:this.sketcher.getMoleculeByAtom(this.sketcher.hovering).atoms:
this.sketcher.hovering instanceof f.Bond?i=[this.sketcher.hovering.a1,this.sketcher.hovering.a2]:this.sketcher.hovering instanceof c._Shape&&(i=this.sketcher.hovering.hoverPoint?[this.sketcher.hovering.hoverPoint]:this.sketcher.hovering.getPoints()),this.parentAction=new e.MoveAction(i,b),this.sketcher.historyManager.pushUndo(this.parentAction)}else this.sketcher.lasso.addPoint(a.p),this.sketcher.repaint()};b.LassoState.prototype.innermousedown=function(b){this.inDrag=!1;if(this.sketcher.lasso.isActive()&&
!d.SHIFT){m=void 0;var g=25/this.sketcher.specs.scale;a.isBetween(b.p.x,this.sketcher.lasso.bounds.minX,this.sketcher.lasso.bounds.maxX)&&a.isBetween(b.p.y,this.sketcher.lasso.bounds.minY,this.sketcher.lasso.bounds.maxY)?m=1:a.isBetween(b.p.x,this.sketcher.lasso.bounds.minX-g,this.sketcher.lasso.bounds.maxX+g)&&a.isBetween(b.p.y,this.sketcher.lasso.bounds.minY-g,this.sketcher.lasso.bounds.maxY+g)&&(m=2)}else this.sketcher.hovering||(this.sketcher.lastPoint=void 0,this.sketcher.lasso.addPoint(b.p),
this.sketcher.repaint())};b.LassoState.prototype.innermouseup=function(a){m||this.sketcher.hovering||this.sketcher.lasso.select();this.innermousemove(a)};b.LassoState.prototype.innerclick=function(){if(!m&&!this.inDrag)if(this.sketcher.hovering){var a=[],b=[];this.sketcher.hovering instanceof f.Atom?a.push(this.sketcher.hovering):this.sketcher.hovering instanceof f.Bond?(a.push(this.sketcher.hovering.a1),a.push(this.sketcher.hovering.a2)):this.sketcher.hovering instanceof c._Shape&&b.push(this.sketcher.hovering);
this.sketcher.lasso.select(a,b)}else this.sketcher.lasso.isActive()&&this.sketcher.lasso.empty();m=void 0};b.LassoState.prototype.innermousemove=function(b){if(this.sketcher.lasso.isActive()){if(!d.SHIFT){var e=!1,i=25/this.sketcher.specs.scale;if((!a.isBetween(b.p.x,this.sketcher.lasso.bounds.minX,this.sketcher.lasso.bounds.maxX)||!a.isBetween(b.p.y,this.sketcher.lasso.bounds.minY,this.sketcher.lasso.bounds.maxY))&&a.isBetween(b.p.x,this.sketcher.lasso.bounds.minX-i,this.sketcher.lasso.bounds.maxX+
i)&&a.isBetween(b.p.y,this.sketcher.lasso.bounds.minY-i,this.sketcher.lasso.bounds.maxY+i))e=!0;e!=g&&(g=e,this.sketcher.repaint())}}else e=this.sketcher.lasso.mode!==h.Lasso.MODE_LASSO_SHAPES,this.findHoveredObject(b,e,e,!0)};b.LassoState.prototype.innerdblclick=function(){this.sketcher.lasso.isActive()&&this.sketcher.lasso.empty()};b.LassoState.prototype.draw=function(a){if(g&&this.sketcher.lasso.bounds){a.fillStyle="rgba(0,0,255,.1)";var b=25/this.sketcher.specs.scale,i=this.sketcher.lasso.bounds;
a.beginPath();a.rect(i.minX-b,i.minY-b,i.maxX-i.minX+2*b,b);a.rect(i.minX-b,i.maxY,i.maxX-i.minX+2*b,b);a.rect(i.minX-b,i.minY,b,i.maxY-i.minY);a.rect(i.maxX,i.minY,b,i.maxY-i.minY);a.fill()}}})(ChemDoodle.math,ChemDoodle.monitor,ChemDoodle.structures,ChemDoodle.structures.d2,ChemDoodle.sketcher.actions,ChemDoodle.sketcher.states,ChemDoodle.sketcher.tools,Math);
(function(a,d){d.LonePairState=function(a){this.setup(a);this.delta=1;return!0};d.LonePairState.prototype=new d._State;d.LonePairState.prototype.innermouseup=function(){0>this.delta&&1>this.sketcher.hovering.numLonePair||this.sketcher.hovering&&this.sketcher.historyManager.pushUndo(new a.ChangeLonePairAction(this.sketcher.hovering,this.delta))};d.LonePairState.prototype.innermousemove=function(a){this.findHoveredObject(a,!0,!1)}})(ChemDoodle.sketcher.actions,ChemDoodle.sketcher.states);
(function(a,d,f){d.MoveState=function(a){this.setup(a);this.action=void 0;return!0};d.MoveState.prototype=new d._State;d.MoveState.prototype.innerdrag=function(c){if(this.sketcher.hovering)if(this.action){c=new f.Point(c.p.x,c.p.y);c.sub(this.sketcher.lastPoint);this.action.dif.add(c);for(var e=0,b=this.action.as.length;e<b;e++)this.action.as[e].add(c);e=0;for(b=this.sketcher.molecules.length;e<b;e++)this.sketcher.molecules[e].check();this.sketcher.repaint()}else e=[],c=new f.Point(c.p.x,c.p.y),this.sketcher.hovering instanceof
f.Atom?(c.sub(this.sketcher.hovering),e[0]=this.sketcher.hovering):this.sketcher.hovering instanceof f.Bond&&(c.sub(this.sketcher.lastPoint),e[0]=this.sketcher.hovering.a1,e[1]=this.sketcher.hovering.a2),this.action=new a.MoveAction(e,c),this.sketcher.historyManager.pushUndo(this.action)};d.MoveState.prototype.innermousemove=function(a){this.findHoveredObject(a,!0,!0)};d.MoveState.prototype.innermouseup=function(){this.action=void 0}})(ChemDoodle.sketcher.actions,ChemDoodle.sketcher.states,ChemDoodle.structures);
(function(a,d,f,c,e){f.NewBondState=function(a){this.setup(a);this.bondOrder=1;this.stereo=c.Bond.STEREO_NONE;return!0};f.NewBondState.prototype=new f._State;f.NewBondState.prototype.incrementBondOrder=function(a){this.newMolAllowed=!1;1===this.bondOrder&&this.stereo===c.Bond.STEREO_NONE?this.sketcher.historyManager.pushUndo(new d.ChangeBondAction(a)):a.bondOrder===this.bondOrder&&a.stereo===this.stereo?(1===a.bondOrder&&a.stereo!==c.Bond.STEREO_NONE||2===a.bondOrder&&a.stereo===c.Bond.STEREO_NONE)&&
this.sketcher.historyManager.pushUndo(new d.FlipBondAction(a)):this.sketcher.historyManager.pushUndo(new d.ChangeBondAction(a,this.bondOrder,this.stereo))};f.NewBondState.prototype.innerexit=function(){this.removeStartAtom()};f.NewBondState.prototype.innerdrag=function(b){this.newMolAllowed=!1;this.removeStartAtom();if(this.sketcher.hovering instanceof c.Atom){if(15>b.p.distance(this.sketcher.hovering)){var d=this.getOptimumAngle(this.sketcher.hovering),b=this.sketcher.hovering.x+this.sketcher.specs.bondLength*
e.cos(d),d=this.sketcher.hovering.y-this.sketcher.specs.bondLength*e.sin(d);this.sketcher.tempAtom=new c.Atom("C",b,d,0)}else a.ALT&&a.SHIFT?this.sketcher.tempAtom=new c.Atom("C",b.p.x,b.p.y,0):(d=this.sketcher.hovering.angle(b.p),b=this.sketcher.hovering.distance(b.p),a.SHIFT||(b=this.sketcher.specs.bondLength),a.ALT||(d=e.floor((d+e.PI/12)/(e.PI/6))*e.PI/6),this.sketcher.tempAtom=new c.Atom("C",this.sketcher.hovering.x+b*e.cos(d),this.sketcher.hovering.y-b*e.sin(d),0));d=0;for(b=this.sketcher.molecules.length;d<
b;d++)for(var j=this.sketcher.molecules[d],f=0,g=j.atoms.length;f<g;f++){var l=j.atoms[f];5>l.distance(this.sketcher.tempAtom)&&(this.sketcher.tempAtom.x=l.x,this.sketcher.tempAtom.y=l.y,this.sketcher.tempAtom.isOverlap=!0)}this.sketcher.repaint()}};f.NewBondState.prototype.innerclick=function(a){!this.sketcher.hovering&&!this.sketcher.oneMolecule&&this.newMolAllowed&&(this.sketcher.historyManager.pushUndo(new d.NewMoleculeAction(this.sketcher,[new c.Atom("C",a.p.x,a.p.y)],[])),this.sketcher.isMobile||
this.mousemove(a))};f.NewBondState.prototype.innermousedown=function(a){this.newMolAllowed=!0;if(this.sketcher.hovering instanceof c.Atom)this.sketcher.hovering.isHover=!1,this.sketcher.hovering.isSelected=!0,this.drag(a);else if(this.sketcher.hovering instanceof c.Bond){this.sketcher.hovering.isHover=!1;this.incrementBondOrder(this.sketcher.hovering);for(var a=0,e=this.sketcher.molecules.length;a<e;a++)this.sketcher.molecules[a].check();this.sketcher.repaint()}};f.NewBondState.prototype.innermouseup=
function(a){if(this.sketcher.tempAtom&&this.sketcher.hovering){var e=[],j=[],f=!0;if(this.sketcher.tempAtom.isOverlap){for(var g=0,l=this.sketcher.molecules.length;g<l;g++)for(var n=this.sketcher.molecules[g],i=0,o=n.atoms.length;i<o;i++){var k=n.atoms[i];5>k.distance(this.sketcher.tempAtom)&&(this.sketcher.tempAtom=k)}if(g=this.sketcher.getBond(this.sketcher.hovering,this.sketcher.tempAtom))this.incrementBondOrder(g),f=!1}else e.push(this.sketcher.tempAtom);f&&(j[0]=new c.Bond(this.sketcher.hovering,
this.sketcher.tempAtom,this.bondOrder),j[0].stereo=this.stereo,this.sketcher.historyManager.pushUndo(new d.AddAction(this.sketcher,j[0].a1,e,j)))}this.sketcher.tempAtom=void 0;this.sketcher.isMobile||this.mousemove(a)};f.NewBondState.prototype.innermousemove=function(a){this.sketcher.tempAtom||(this.findHoveredObject(a,!0,!0),this.sketcher.startAtom&&(this.sketcher.hovering?(this.sketcher.startAtom.x=-10,this.sketcher.startAtom.y=-10):(this.sketcher.startAtom.x=a.p.x,this.sketcher.startAtom.y=a.p.y)))};
f.NewBondState.prototype.innermouseout=function(){this.removeStartAtom()}})(ChemDoodle.monitor,ChemDoodle.sketcher.actions,ChemDoodle.sketcher.states,ChemDoodle.structures,Math);
(function(a,d,f,c,e,b,h){c.NewRingState=function(a){this.setup(a);this.numSides=6;this.unsaturated=!1;return!0};c.NewRingState.prototype=new c._State;c.NewRingState.prototype.getRing=function(a,b,g,c,d){for(var i=h.PI-2*h.PI/b,c=c+i/2,f=[],k=0;k<b-1;k++){var p=0===k?new e.Atom("C",a.x,a.y):new e.Atom("C",f[f.length-1].x,f[f.length-1].y);p.x+=g*h.cos(c);p.y-=g*h.sin(c);f.push(p);c+=h.PI+i}k=0;for(a=this.sketcher.molecules.length;k<a;k++){b=this.sketcher.molecules[k];g=0;for(c=b.atoms.length;g<c;g++)b.atoms[g].isOverlap=
!1}k=0;for(a=f.length;k<a;k++){for(var i=Infinity,q,p=0,s=this.sketcher.molecules.length;p<s;p++){b=this.sketcher.molecules[p];g=0;for(c=b.atoms.length;g<c;g++){var r=b.atoms[g].distance(f[k]);r<i&&(i=r,q=b.atoms[g])}}5>i&&(f[k]=q,d&&(q.isOverlap=!0))}return f};c.NewRingState.prototype.getOptimalRing=function(a,b){for(var e=h.PI/2-h.PI/b,c=a.a1.distance(a.a2),d=this.getRing(a.a1,b,c,a.a1.angle(a.a2)-e,!1),e=this.getRing(a.a2,b,c,a.a2.angle(a.a1)-e,!1),i=c=0,f=1,k=d.length;f<k;f++)for(var p=0,q=this.sketcher.molecules.length;p<
q;p++)for(var s=this.sketcher.molecules[p],r=0,v=s.atoms.length;r<v;r++)var t=s.atoms[r].distance(d[f]),w=s.atoms[r].distance(e[f]),c=c+h.min(1E8,1/(t*t)),i=i+h.min(1E8,1/(w*w));return c<i?d:e};c.NewRingState.prototype.innerexit=function(){this.removeStartAtom()};c.NewRingState.prototype.innerdrag=function(c){this.newMolAllowed=!1;this.removeStartAtom();if(this.sketcher.hovering instanceof e.Atom){var f=0,g=0;if(15>c.p.distance(this.sketcher.hovering))c=this.sketcher.getMoleculeByAtom(this.sketcher.hovering).getAngles(this.sketcher.hovering),
f=0===c.length?3*h.PI/2:a.angleBetweenLargest(c).angle,g=this.sketcher.specs.bondLength;else if(f=this.sketcher.hovering.angle(c.p),g=this.sketcher.hovering.distance(c.p),!d.ALT||!d.SHIFT)d.SHIFT||(g=this.sketcher.specs.bondLength),d.ALT||(f=h.floor((f+h.PI/12)/(h.PI/6))*h.PI/6);this.sketcher.tempRing=this.getRing(this.sketcher.hovering,this.numSides,g,f,!0);this.sketcher.repaint()}else if(this.sketcher.hovering instanceof e.Bond){f=a.distanceFromPointToLineInclusive(c.p,this.sketcher.hovering.a1,
this.sketcher.hovering.a2);if(-1!==f&&7>=f)c=this.getOptimalRing(this.sketcher.hovering,this.numSides);else{for(var g=h.PI/2-h.PI/this.numSides,l=this.sketcher.hovering.a1.distance(this.sketcher.hovering.a2),f=this.getRing(this.sketcher.hovering.a1,this.numSides,l,this.sketcher.hovering.a1.angle(this.sketcher.hovering.a2)-g,!1),g=this.getRing(this.sketcher.hovering.a2,this.numSides,l,this.sketcher.hovering.a2.angle(this.sketcher.hovering.a1)-g,!1),n=new e.Point,l=new e.Point,i=1,o=f.length;i<o;i++)n.add(f[i]),
l.add(g[i]);n.x/=f.length-1;n.y/=f.length-1;l.x/=g.length-1;l.y/=g.length-1;n=n.distance(c.p);l=l.distance(c.p);c=g;n<l&&(c=f)}f=1;for(g=c.length;f<g;f++)-1!==b(c[f],this.sketcher.getAllAtoms())&&(c[f].isOverlap=!0);this.sketcher.tempRing=c;this.sketcher.repaint()}};c.NewRingState.prototype.innerclick=function(a){!this.sketcher.hovering&&!this.sketcher.oneMolecule&&this.newMolAllowed&&(this.sketcher.historyManager.pushUndo(new f.NewMoleculeAction(this.sketcher,[new e.Atom("C",a.p.x,a.p.y)],[])),this.sketcher.isMobile||
this.mousemove(a))};c.NewRingState.prototype.innermousedown=function(a){this.newMolAllowed=!0;this.sketcher.hovering&&(this.sketcher.hovering.isHover=!1,this.sketcher.hovering.isSelected=!0,this.drag(a))};c.NewRingState.prototype.innermouseup=function(a){if(this.sketcher.tempRing&&this.sketcher.hovering){var c=[],g=[],d=this.sketcher.getAllAtoms();if(this.sketcher.hovering instanceof e.Atom){-1===b(this.sketcher.tempRing[0],d)&&c.push(this.sketcher.tempRing[0]);this.sketcher.bondExists(this.sketcher.hovering,
this.sketcher.tempRing[0])||g.push(new e.Bond(this.sketcher.hovering,this.sketcher.tempRing[0]));for(var h=1,i=this.sketcher.tempRing.length;h<i;h++)-1===b(this.sketcher.tempRing[h],d)&&c.push(this.sketcher.tempRing[h]),this.sketcher.bondExists(this.sketcher.tempRing[h-1],this.sketcher.tempRing[h])||g.push(new e.Bond(this.sketcher.tempRing[h-1],this.sketcher.tempRing[h],1===h%2&&this.unsaturated?2:1));this.sketcher.bondExists(this.sketcher.tempRing[this.sketcher.tempRing.length-1],this.sketcher.hovering)||
g.push(new e.Bond(this.sketcher.tempRing[this.sketcher.tempRing.length-1],this.sketcher.hovering,this.unsaturated?2:1))}else if(this.sketcher.hovering instanceof e.Bond){var h=this.sketcher.hovering.a2,o=this.sketcher.hovering.a1;this.sketcher.tempRing[0]===this.sketcher.hovering.a1&&(h=this.sketcher.hovering.a1,o=this.sketcher.hovering.a2);-1===b(this.sketcher.tempRing[1],d)&&c.push(this.sketcher.tempRing[1]);this.sketcher.bondExists(h,this.sketcher.tempRing[1])||g.push(new e.Bond(h,this.sketcher.tempRing[1]));
h=2;for(i=this.sketcher.tempRing.length;h<i;h++)-1===b(this.sketcher.tempRing[h],d)&&c.push(this.sketcher.tempRing[h]),this.sketcher.bondExists(this.sketcher.tempRing[h-1],this.sketcher.tempRing[h])||g.push(new e.Bond(this.sketcher.tempRing[h-1],this.sketcher.tempRing[h],0===h%2&&this.unsaturated?2:1));this.sketcher.bondExists(this.sketcher.tempRing[this.sketcher.tempRing.length-1],o)||g.push(new e.Bond(this.sketcher.tempRing[this.sketcher.tempRing.length-1],o))}(0!==c.length||0!==g.length)&&this.sketcher.historyManager.pushUndo(new f.AddAction(this.sketcher,
g[0].a1,c,g));c=0;for(g=d.length;c<g;c++)d[c].isOverlap=!1}this.sketcher.tempRing=void 0;this.sketcher.isMobile||this.mousemove(a)};c.NewRingState.prototype.innermousemove=function(a){this.sketcher.tempAtom||(this.findHoveredObject(a,!0,!0),this.sketcher.startAtom&&(this.sketcher.hovering?(this.sketcher.startAtom.x=-10,this.sketcher.startAtom.y=-10):(this.sketcher.startAtom.x=a.p.x,this.sketcher.startAtom.y=a.p.y)))};c.NewRingState.prototype.innermouseout=function(){this.removeStartAtom()}})(ChemDoodle.math,
ChemDoodle.monitor,ChemDoodle.sketcher.actions,ChemDoodle.sketcher.states,ChemDoodle.structures,jQuery.inArray,Math);
(function(a,d,f,c,e){e.PusherState=function(a){this.setup(a);this.numElectron=1;return!0};e.PusherState.prototype=new e._State;e.PusherState.prototype.innermousedown=function(){this.sketcher.hovering&&(this.start=this.sketcher.hovering)};e.PusherState.prototype.innerdrag=function(a){this.start&&(this.end=new d.Point(a.p.x,a.p.y),this.findHoveredObject(a,!0,!0),this.sketcher.repaint())};e.PusherState.prototype.innermouseup=function(){if(this.start&&this.sketcher.hovering&&this.sketcher.hovering!==
this.start){for(var a,e=!1,d=0,m=this.sketcher.shapes.length;d<m;d++){var g=this.sketcher.shapes[d];g instanceof f.Pusher&&(g.o1===this.start&&g.o2===this.sketcher.hovering?a=g:g.o2===this.start&&g.o1===this.sketcher.hovering&&(a=g,e=!0))}a?(e&&this.sketcher.historyManager.pushUndo(new c.DeleteShapeAction(this.sketcher,a)),this.end=this.start=void 0,this.sketcher.repaint()):(a=new f.Pusher(this.start,this.sketcher.hovering,this.numElectron),this.end=this.start=void 0,this.sketcher.historyManager.pushUndo(new c.AddShapeAction(this.sketcher,
a)))}else this.end=this.start=void 0,this.sketcher.repaint()};e.PusherState.prototype.innermousemove=function(a){this.findHoveredObject(a,!0,!0);this.sketcher.repaint()};e.PusherState.prototype.draw=function(b){if(this.start&&this.end){b.strokeStyle="#00FF00";b.fillStyle="#00FF00";b.lineWidth=1;var e=this.start instanceof d.Atom?this.start:this.start.getCenter(),c=this.end;this.sketcher.hovering&&this.sketcher.hovering!==this.start&&(c=this.sketcher.hovering instanceof d.Atom?this.sketcher.hovering:
this.sketcher.hovering.getCenter());b.beginPath();b.moveTo(e.x,e.y);a.contextHashTo(b,e.x,e.y,c.x,c.y,2,2);b.stroke()}}})(ChemDoodle.extensions,ChemDoodle.structures,ChemDoodle.structures.d2,ChemDoodle.sketcher.actions,ChemDoodle.sketcher.states);
(function(a,d){d.RadicalState=function(a){this.setup(a);this.delta=1;return!0};d.RadicalState.prototype=new d._State;d.RadicalState.prototype.innermouseup=function(){0>this.delta&&1>this.sketcher.hovering.numRadical||this.sketcher.hovering&&this.sketcher.historyManager.pushUndo(new a.ChangeRadicalAction(this.sketcher.hovering,this.delta))};d.RadicalState.prototype.innermousemove=function(a){this.findHoveredObject(a,!0,!1)}})(ChemDoodle.sketcher.actions,ChemDoodle.sketcher.states);
(function(a,d,f,c,e,b,h){b.ShapeState=function(a){this.setup(a);this.shapeType=b.ShapeState.LINE;return!0};b.ShapeState.prototype=new b._State;b.ShapeState.prototype.innermousedown=function(a){this.end=this.start=new f.Point(a.p.x,a.p.y)};b.ShapeState.prototype.innerdrag=function(a){this.end=new f.Point(a.p.x,a.p.y);if(!d.ALT){var a=this.start.angle(this.end),b=this.start.distance(this.end);d.ALT||(a=h.floor((a+h.PI/12)/(h.PI/6))*h.PI/6);this.end.x=this.start.x+b*h.cos(a);this.end.y=this.start.y-
b*h.sin(a)}this.sketcher.repaint()};b.ShapeState.prototype.innermouseup=function(){if(this.start&&this.end){var a;this.shapeType>=b.ShapeState.LINE&&this.shapeType<=b.ShapeState.ARROW_RETROSYNTHETIC&&(a=new c.Line(this.start,this.end),this.shapeType===b.ShapeState.ARROW_SYNTHETIC?a.arrowType=c.Line.ARROW_SYNTHETIC:this.shapeType===b.ShapeState.ARROW_RETROSYNTHETIC&&(a.arrowType=c.Line.ARROW_RETROSYNTHETIC));this.end=this.start=void 0;a&&this.sketcher.historyManager.pushUndo(new e.AddShapeAction(this.sketcher,
a))}};b.ShapeState.prototype.draw=function(b){this.start&&this.end&&(b.strokeStyle="#00FF00",b.fillStyle="#00FF00",b.lineWidth=1,b.beginPath(),b.moveTo(this.start.x,this.start.y),a.contextHashTo(b,this.start.x,this.start.y,this.end.x,this.end.y,2,2),b.stroke())};b.ShapeState.LINE=1;b.ShapeState.ARROW_SYNTHETIC=2;b.ShapeState.ARROW_RETROSYNTHETIC=3})(ChemDoodle.extensions,ChemDoodle.monitor,ChemDoodle.structures,ChemDoodle.structures.d2,ChemDoodle.sketcher.actions,ChemDoodle.sketcher.states,Math);
(function(a){a.StateManager=function(d){this.STATE_NEW_BOND=new a.NewBondState(d);this.STATE_NEW_RING=new a.NewRingState(d);this.STATE_CHARGE=new a.ChargeState(d);this.STATE_LONE_PAIR=new a.LonePairState(d);this.STATE_RADICAL=new a.RadicalState(d);this.STATE_MOVE=new a.MoveState(d);this.STATE_ERASE=new a.EraseState(d);this.STATE_LABEL=new a.LabelState(d);this.STATE_LASSO=new a.LassoState(d);this.STATE_SHAPE=new a.ShapeState(d);this.STATE_PUSHER=new a.PusherState(d);this.STATE_ATOM_QUERY=new a.AtomQueryState(d);
var f=this.STATE_NEW_BOND;this.setState=function(a){a!==f&&(f.exit(),f=a,f.enter())};this.getCurrentState=function(){return f};return!0}})(ChemDoodle.sketcher.states);
ChemDoodle.sketcher.gui.imageDepot=function(){return{getURI:function(a){return"data:image/png;base64,"+a}

,ADD_RADICAL:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAL0lEQVR42mNgGAWjYGgAGyB+DMTPgdiFGgaCDPsPxc8HpYE2UINA2GM0BYyCoQAAdQgMLdlWmzIAAAAASUVORK5CYII="
,BOND_SINGLE:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAMklEQVR42mNgGMSAm5qGOQDxfSDmopZhr4DYftSwUcNGDRs1jP6GcUPLM6oYBgNUKRwBiE8XjxDJvZUAAAAASUVORK5CYII="
,REMOVE_RADICAL:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAM0lEQVR42mNgGAWjYGgABSDeD8T/gfg4lE8RABlmAmUbQA2lCPwnwB94F1I9DEfBKEADAAT6C11yCuPwAAAAAElFTkSuQmCC"
,ADD_LONE_PAIR:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAANElEQVR42mNgGAWjYHACGyB+DMTPgdiFDHkMAFL8H4qfkyFPewNtoApB2IMM+VEwCgYcAADjvBhZpYZJbQAAAABJRU5ErkJggg=="
,REMOVE_LONE_PAIR:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAN0lEQVR42mNgGAWjYHACBSDeD8T/gfg4lE+KPAYAKTaBsg2gmkiRxwD/KeTT3oVUD8NRMAoIAAADoBa5tWLP/wAAAABJRU5ErkJggg=="
,BOND_DOUBLE:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAQUlEQVR42mNgoA7gZqAicADi+0DMRS3DXgGxPTVcim4YzKVUMwyZP2rYqGGjhg0Dw7ihpQRVDIMBLmoahsulZAEA2GgvCVlTJIIAAAAASUVORK5CYII="
,BOND_RECESSED:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAQUlEQVR42mNgGGQghJqGBQDxbyBOoaahCYPSUGyaYYYOI28y4PDm4IxNBmp6k2JAE28OPvAdiBuoaaALwyggBQAA+tATdpIiCMcAAAAASUVORK5CYII="
,BOND_TRIPLE:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAUUlEQVR42mNgoAxwM1AROADxfSDmopZhr4DYnhouRTeMIpdiM4xslxIyDOZSqhmGzB81bNSwATeMG5rCqWIYDHBR0zBiXUoW4KKmYbhcShIAAA2MPiFy45L3AAAAAElFTkSuQmCC"
,ARROW_SYNTHETIC:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAUklEQVR42mNgGAWjgC5ABoh5qGmgAhD/B+I7QJwAxALUMPQg1NAHQPwdiPegG/6fipgssA+q+REQ/wDivUCcAsQi5EYKLAzJNgQ9UmRGE/tIBgDIaCG7b3KulAAAAABJRU5ErkJggg=="
,ARROW_RETROSYNTHETIC:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAYElEQVR42mNgGI5AhZqGKQDxbSA2oaahBrQ01ILahr4HYhtskv8pwF9xGUouAHn7MRA7UNNQG6hrPahtoA+1vPwc3XWURooPtZLNc2qFG8iw+9Q2zIFahQPV05zG0C59AY3IMME0CTYYAAAAAElFTkSuQmCC"
,CYCLOBUTANE:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAiklEQVR42q3UwQ2AIAwF0E7hOv4bTCN7uwIXG0MTYgRa2iYNF3lB+ECkr4MCK3NX7hSBgfvmvtp4RmCCnB4Ug8lbKBaTTCiUH6tQGH9nimJzw3/R7IyEoEluQG0581RpzlvJuUL0KyRnaKd7b0VVB6lFTalYoVsRG6HwHOAXRcQTJmiJwPqcql7sB1sQMyMuYZLDAAAAAElFTkSuQmCC"
,CYCLOPROPANE:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAjElEQVR42mNgGE5AgZqGiQDxfyCWoJaBk4H4ORBPp4ZhGkB8G4h5gPg6EBtQauB2IA6Asj2AeD8Qs5BrGDYDkC0gCbDg8CIsCDhINbAATySAIqmC1GRyH08yISRPlgsKiE1GxIYRC7HJiJRYJJiMyElnOB3AQmZOwBlEBRTkVYxIlICWJpRimcFfCgMA4CwtbAP2SjIAAAAASUVORK5CYII="
,BOND_PROTRUDING:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAl0lEQVR42mNgoAwEAHEDA5WAChC/B+L/1DCUBYivQw37Tw1Dl6MZRpGhBTgM+w3EFaQaZgPEn7EY9hiIPUg1TAaI72Mx7DAQK5ATCbuxGNYPxDzkhFs3lvCKoCTxIht2G4g1qJF4QXg9uV5ET7xkJQlciZesJIEr8ZKVJHAl3n5Kwgs58d6mJEmgR8J0SpIENq/yMAx7AADDzz/MOB6JagAAAABJRU5ErkJggg=="
,IODINE:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3QIBCzkLNQsqhwAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAAN0lEQVQ4y2NgGAWDDjCiCyxiiDvDwMBozMDAwPCX4Y9uIsPSK6QYyERtF44aOGrgqIEDYuDgBwAfCwYalPLKXwAAAABJRU5ErkJggg=="
,CYCLOHEXANE:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAoElEQVR42mNgIB4IMVAJSADxZCD+A8StQMxFiUH9QPwWiPuA2AiIlwLxYyCOAWJGcg2SQJO3AOITQHwSiC0pMQgZMEJd+Rjqall0BZxA/J8Ig9ABKDwboXo50SX/UxBx/4kWHDVw1EDcemEJu5+aCVsCmlPeEmEwwaxHisGW0ILhBLSgIKn4QjYYVHwtA+JHpBZf2AyeBC1gWygpYMmqAgB+TzRkG9cEtwAAAABJRU5ErkJggg=="
,HYDROGEN:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3QIBCzg4k8B60AAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAAQUlEQVQ4y2NgGAVDAvyH4j9Y5DyQ5Ddg08xEbdeMQANZ8MgxMjAwRKCJ6VMSy4TwwMfyX6i3kbHnaLKhvYGDHwAAiaYSgbtIMXkAAAAASUVORK5CYII="
,DECREASE_CHARGE:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAA+0lEQVR4nL2QQWrCUBCGP5vurC5KzboI3sKt1Gu0XSoteJIuSl30HHWlZNXcJKBWXJSskti6cB4MjyTPRPGHYV4m/3wzDFxILeAVCIANkEoOpN6qAhsCa+C/JNbic2oC/DlgJnbiL9SDmI6BaeggD3YDrCrCTCyBpg0c14SZGNnAxYnAuQE1JP8Ad/IOgWcgy7uN6Br4BPqq39eGTE17LwFpvame1BSvJMfKeA94DpgHdNV3bBtCTrvht73hzLGRS192wZe162wXA528KU81gY9lq08rwj7KL3HQC5A4QIn4jlZPpkcWKJJ6r6ixUfRD6RZoA7/AtspWZ9EeiVCyHSrNcNYAAAAASUVORK5CYII="
,BOND_DOUBLE_AMBIGUOUS:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAwElEQVR42q2UsQ2DQBAE38EnBDQAJUBGA6YM04UD3n1AYhdhMkqAHpw4owgkJNbSfuLw904aIZLV3t/tOWdTmTOsGnytRHPwATcLpxcwgYH/HZ0mVwALXY10WqWKtWADDVjBm+0nVUmxO79BadPT0UyxqzrVF4V+b1eoYg+wgyedymIH6FUhzzZ3C7GSA9jYplRxz2YOwCtxCn97VihBn+ioUfesZhYHZnNVEpDxSsQTNDKbJhe3o9PcGVR0WikiJ/j5KxJqecPNAAAAAElFTkSuQmCC"
,FLUORINE:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3QIBCzgjGaWzPAAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAAZElEQVQ4y2NgGAWDDjCiC6j84PtPSNMdjk+MuOSYqO1CFpwy/xn+/WNgiKael/8z/L3D+YmFVAPp6GUGBkal73wR6ILf33/a+FyK4TvVYvn/N2bZu0LvnwyKWB4ckTICDRz8AAAUgx9MBirCFAAAAABJRU5ErkJggg=="
,INCREASE_CHARGE:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAABGklEQVR4nK3UPU7DQBAF4I+IJhI/AnED0nIDBBUouQAFFUfhADRIFFRARZ8WLmHEAYhEi8RvgAIJiuziBXmNE/Kk1dh++55nxt5hypip4eaxjTUs4hHXuMDzOC9p4wCv+KxYw8C3m5h1cJUx+r0KrNaZLWPQ0CyuAZZyhv2MqBf4XobvV5lt1mTRSdqR27MRjVoh7uU70Qjf+tkQ1xPyHuf4CPcPSTxMdLvK/qV68K5M/7hhVkeJ5i0+bGW3T4hY8q2y+TshxpL3cYeVcB11cV/U/8Cp/33lk2gUSz4bp6wKVOpzP3Y38N0MX/ljM9nRu1Fz9Bgd9qKhWeGP4RARx9cwY1Q7vuoG7By2jAbsAp6MBuwlXppkNhV8ATwBjjX/2pzTAAAAAElFTkSuQmCC"
,CYCLOPENTANE:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAA0klEQVR42mNgIB6IMFAJMAFxKRD/BuI0Sg1TAeJDUOwOxFeBeAEQc5Hjqnwgfg3EeUDMCBUHGTQfarAWOa5SxqEmHohfAXECOa7CBbTwBYEWEa7CBpCDwAAmKAjEf6ExyUhm5KUD8R8gFoAJ7AHiIApSA0jvbmSBHKjTyQUgvdnIAvJA/BIaMeQksZdQM1DAJSC2IMNAS6heDNAKxaQCnPpw2kQA4PQZzrDAAwiGPUZsEQCg1DGPUHraQYKBOwmlXx4g/k8i5iFkKxsJLmRjoDUAAID6NQMa+if+AAAAAElFTkSuQmCC"
,BENZENE:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAA5klEQVR42s2VPwrCMBSH06k0o1MX6R2c7A08hDfRRdDVgp5BR71GvUKdtHNvIMRf4FcoIdgkzeCDD0r+fLyQl1ch3GMmIkUOzuADDkBOEVWgA0ewABfQgjVIQkU5x/vMlqAGD1CGiFKwBS+QcSxhli2znpsyvVAZIh0r8AQ3UFiS0FnvuDczJ9XgW2++g4bSsVC/BiWPt+FxXSRqbEHmmZVyTvtvhTKmUMvesS+lYO0Fl01f2JWlsJvQws75UjpDnPL4Xk/PRdzLSjaGmo3Cq30Nxbp9XXlhXu3LJj6xwe6nNNigX8AXVupH9hGtsNcAAAAASUVORK5CYII="
,PUSHER_SINGLE:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAA6ElEQVR42mNgGACgA8QxQBwAxCKUGOQAxKeB+DwQzwfiw0D8HohzyDEM5JrXQBwBxCxI4hpQC7pJ9eJjIDbBIS8BxLeBOIFYA/cDcQUBNSZQS3mICbfbaN7EBZYDcQEhRYuJcB0MeEDDE6flPNBYVCDSQBYCYQ327mUSUwPI2ym4JEuAeDaJBoL0TIeyZdB9txiqgBTgAU38O4H4P9RQOADlBBcSDVSAGvQPiO+gS4KSiwqJBgpADbyKLSzfQxWQCkAGfsFWcPwnsxAB6duOS4JcA1OoWV7+x1VO3odiUsFxXBLkGoiSdgEanzHP7ILArQAAAABJRU5ErkJggg=="
,PUSHER_DOUBLE:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAA8klEQVR42mNgGACgA8QxQBwAxCKUGOQAxKeB+DwQzwfiw0D8HohzyDEM5JrXQBwBxCxI4hpQC7pJ9eJjIDbBIS8BxLeBOIFYA/cDcQUBNSZQS3mICbfbaN7EBZYDcQEhRYuJcB0MeEDDE6flPNBYVCDSQBYCYQ327mUSUwPI2ym4JEuAeDaRBskAsQpUz3SoK1WwhV8JkQaCguc/NOHfg7IxYhyUE1xI8O5zqEEwjAFuY3M2HpAJxP+ghu3FpgAUwwIkGAhS+xdqYC82Bf/JyPM3ofpiqGVgGVSfCbXKSgFsMXwfinHxCYF+dAFKDZRB5gAAj/I5E2fZy9MAAAAASUVORK5CYII="
,ANY_ELEMENT:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3QIBCzonLP4VpwAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAAkElEQVQ4y+3TIQoCURCH8d9q8AZGb2HwGBajYPYYGzcYxQtYxCPYDBYvYVVUMBhE1jI2w7prEd4HA/OGx8e8PzwSiTc7HKtcbFUUXnFuKpxghQEuUT3MMK7zzAJPlLjjhkecl3Wz6yIPSYk5+sjqCjvY44ATNl/k/pFFbDbCNPq8iXCIdfRtbGP2M7L0Jf+QF/6JG4xlEcPAAAAAAElFTkSuQmCC"
,CYCLOHEPTANE:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAA+UlEQVR42mNgIB4IMFABMAOxJxCvAeK/QLwAiA3IMUgTiDuB+CkQnwDiDCBWAuIKIH4ExIeAOASIWfAZIgzEmUB8EmpQBxBr4HA1yLCDUMMrgVgcXREPEP8D4pVA7AHVRAzQB+J5UL08yBKKQPyQgrAGuVQBWcARiA9QYCDI+w7IAonQGCQXLATiBGSBRiBuoMBADP0YNpAIMHyIEQYkAow4wIglEgFKKuGFpiMTCgw0gZrBCxMIgdogQYZhElC9IegS1dB8y0GCYRzQrFqNS8FSKCYWLCOkngPqymoiDKsh1kewMAnCoyaY1DA3BOL/BLAhqbHHRY4cAH9nN15emqC1AAAAAElFTkSuQmCC"
,CYCLOOCTANE:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAABBElEQVR42q2UvQ6CMBSFSXS1g4PRzVUXeRGdHH0KWfQlINGB1VcgzJLokxB2B3dIPDWnSYO1QutJvkB/ONxL7yUIumsU/EFLEIECNCAHOyC6GozBBqSgJPJ+DaY0y8CTVzme2MxkFFewBwvLiwXNcj4zM23a0KyvLuBgWkgZWV+FoAKD9kL5I02b7mDbPs3Soxqk2U2fiJiyq4ZMe6UmCpaGj448oHcHNKwz3yao1UB1gI8ScFID1QGuktk99CwF20l4RBe3JzPHtD+i09POHQzPpugC/jUaHn3YMbIzT3b+bdOMjV5p7TQ0GCVMM7aZ6Rpo7VSxaJctI+e6XfEz1Kwzq9ELFZA4hr9lYwQAAAAASUVORK5CYII="
,RGROUP:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3QIBCzo3MUkFwwAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAAvUlEQVQ4y+3UMWoCQRgF4C+LpBCxCSms0ngJj2BlKzmGpAv2HiFVOsETeAtBbDyDlaAYEHbVZophSZbNuoWCP/zw+N/jzT/zYHjUzdf5l/7BCmM06zCMe4lWFcMMw9Af2ETcZxXDNDd/j7h5kUFS8qBDhHdFwsYf86dwXXjFKOAMX5Guh7eqoezRz+lneV3yj/dtYYLOtaG8YBpx33Wk3I24dR0pbyPcrmPDBk6BOxYtUnbDFIuAnzG43+/qAu29RUDDiArjAAAAAElFTkSuQmCC"
,NITROGEN:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3QIBCzkbKLw64wAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAA3ElEQVQ4y2NgGAXDHzCiC0gxdP1H8P66PGOo3AvjSTB0eDAxMG2H8P5vfMZQHoCunwmfbf8ZmPoYGEKZSHEhE37nM+pJMpgmU81AaJg0CzE08FLBwP///zP8/8nAwCDOwcBVSQ0X/mNkYOiHhCVDoQRDhzzFXv7B8L2NgYHhJSMDAwcjA2MHxQa+Y2j4/J+BoRYaQRGMDIyWFEfKc4bTc/8z/L8E5ZZSbCADw+p/jAz/iqCu5KSCgQwMzxgq9/5n+L+ZKukQKT2W/Gf4/5tqBj5jKL/FyMAwje6lDQDlyDN9k2qRyAAAAABJRU5ErkJggg=="
,PHOSPHORUS:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3QIBCzoMgELs5wAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAABCklEQVQ4y+2TsS5DcRjFf9+/bpNykVRIRNKQGCS8Qd/AA1gsNm0Hg8VmlJjFUE8g8QImr4CBGJhcbRGRNAyK/7FUQ1w3udVBxNn+J985X8538od//H1YHHlZHdcXUjwDEbD/5G1julKL4rQuxeoAYwqjnHX++GJrbC5urC/JQ+C9WGxHCc20ZFjRzPJB4KpAMVVkiddCqd5ZerY5EvYPZ2tmDAI0HzP52dXovrvIwMza3QOm5vs7yJFLFfkjTrZHB0LnKoZNtO9xfXQQNVIZmpGJbRyQtL6wh+++5Y4Rt/JaLpQbOz9rWWpJ/ur0ZehwfuW89Z0m+YZCk6X67mfyJlHiev31fr9hz/EGzj1V8g1+ynsAAAAASUVORK5CYII="
,OXYGEN:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3QIBCzkzHQmSGQAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAABIklEQVQ4y+1UPUsDQRScvdy8tVAQtZOA2Js/YCn+EUv9B1aCCPkhVnb6GxRBTSUIfiCiVoKSRMXzLXdrkwvLJXq5FDb6YIuZYWYX3nsL/Ncfrj0gSsg1FTlUkY6KfDjyQsmdNjBdKewMiJXcdyJ+6CFv29YujByo5HZuVpGnT5HNxNoNFTkN+JMtwJSGXQOiIt2eKX0jl3LtAZhw5E0emli7UvRHRWI+jhsGmOrB1qRz57lWBxIP7ObYeL9cGhjVajN94P1jUc+A+yBwrjSwwGVD9OzHB1U1lF04YMjS9KUPjKkPGELOmOeqXc7eyUaoOfIq6PLq+HMYx+sqchwMeGukOQw25eC7TVHyrmPt4ri7fKQiXRVJHHmpZPMVmP21T+ULG7iaXtwXVjUAAAAASUVORK5CYII="
,BROMINE:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3QIBCzckAFk6UAAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAABU0lEQVQ4y+2UMUsDQRCFv9lcNgHBztpOrQVLIY2Q2ioiljFgOv0FQes0EtH8AcVK/0EKK1MFEQXBQntBq8te2LHIFcfdRRMrEV+3s/Dem3mzC//4dRCAZqmkyaKCF3hH9R64NM6dHYP7MWEaqtobObfRhdF3hCbtTL3fQmRH4QgIAUSkElhb/YqoAgWAIGVXO1F0QRQB0LR2AZHG+FIWAfasXRGRh9jAFaqvIlL3qrWec9fBJLVla5dUZF3imhcZ5MyrikgZwKi+ZBwChbyAgPZpGN7kaJcV2njfH0XRYx5hXmqhgtmFIB2Kwt3JcHiQrAUZN95vA4gxc0ADWBPYD6z9wLlWSs+nDeSHEqNRLPYDYwZx0ptAa6a1yfYrUeJUmmax0y3LXrFYG0uZeaCeWO7bmQkFDMacZ14KvAkcTkM4sWUFh+qzqna9yGrHuae/8X19AlhOeu/pFGoGAAAAAElFTkSuQmCC"
,SULFUR:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3QIBCzoadJZZtgAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAABW0lEQVQ4y+2Uu0pDQRCGv6NRUFNIxEbBJqWiVmqhiFgLeQlJq1gIghBrC619hDRaGLARSxEt4iWFhQTMdbeKF4yey6yFHj1IAscINjqwzQz/t/8wOwv/8Yfj5pH+qrChhKwSalqoa+FCeaydlelqprMaJUs2Yx0RDrHoa1Q3huxjjdl4jPuvtbZGgkiELR9mDKdGSBphCUMewLIYj/ayGrpdLShtMNpgik8M+vmiw6QS3Pdz9B3gsQ/UwmZO0/OjgZRc5rXw7EOVcFcVdqoucy1DCzYjWthTgvfh9s3xedlhumVwpc6Q8ljRwlXAsV1xmAkFuH6gr+ySKLskqg4TwZryWA9AM6GARZvRQHuXqdTnW721GQ4Ac6GA6TRtWsgHhPvKI6k8FpVwErhsN/ymOExF2slYFrEmm3LnuswOdnIeCujvcrSbZQsWgLgBFygYOJAXtge6KPzKp/IKaQXcIwBLMUcAAAAASUVORK5CYII="
,CARBON:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3QIBCzgKWxcrUAAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAABfElEQVQ4y+2Tv0tCURTHv8dfF9LoLUUPh6ACIVCk5wvb2hraWmqJmoMW/4w2/4GCGvoPGqKoOa4UDQ8SiYbgSSRKgy+t/Db0BBVFoaWgs51zvud7Ppd7L/Afvy6kXzGVSo2Fw+EcgE0AcyLyCeAewEm9Xs87jvM+smEymTQikciliKQHzFzVarXVUqnU7NcM9BaUUvm2GckiyT2SOZKPvmTFMIzdkQh9uhcRCQJoAJjXWj8BQCaTSQO48RfpQqFgDyVUSqV8MwC4bpsBgNb6FsApyQsA7iDCUGfSarXGA4HvHSSfe8Va67Vht9xFSFJ++my6DEWEPzUM9RC+dqTTvWLLso4ARETkTWu9M8qR70h++LRLlmXNtnu2bS+IyJaIbJDMDiIMdiblcrkRj8dnACz6vXXTNAOmaaYB7IvIlC89cF33fKSfkkgkYrFY7ExElvsNkCx6npd1HKc6lBAAKpVKMxqNHiulqiIyCWACQIvkA4BDz/O2B5n9jfgCZJCLYDe/j2UAAAAASUVORK5CYII="
,CHLORINE:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3QIBCzsZ9IQ5TQAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAABqUlEQVQ4y+2Uz0vTcRjHX8/n+/WrW0aTDhW4DUoCnRPpIHYTPPYHlEkk1aUgCPsHgi5BEunBswotPHrxEERdungoqbHYIJggBHWIojbn2t4d9h0ML35FT9Jz+sDzfF6f9/PrA//tsGYHvdD/rL+n75xfBRD8yU+Vezv9fvswsnImLi82K8c1gwuCBqIoeKlSfL7wqFCP8qADyC6mEuqKvcPx2CAD9BicMOOSM556FyuvBhYGgshAnbJ5YBRAUknivqRZiXJYmInY6fq9KEA/u5hKyGyaFq3Gjj+Zv/VlG2BwOf3GD+xDCJ0Gnu+rUAk3YoYXFnmjDQP4fHNrE1iXeC3jaySFUvOkmQt7bt/2BnyaKl85yBQ4zLOjnEOHGjpKoO/wfkGLaeLs3oBsLr0CBIKd/PWtmX0VenV9lPQXQKaxzFLyfNs5mEsOYXYDs6vAeKSUN2fKPw1bbk2GdbnAvR1+kXqYzaXverjVjti1SCkD7Fa7HwTx2hBwGbOkmc11LrqkUrPSeBJ5U4q3i7+r3/2JcDveS1SQapJKSHPNSmO8cGf7x/H4D/8BuH6YMJETQv8AAAAASUVORK5CYII="
,ARROW_DOWN:"iVBORw0KGgoAAAANSUhEUgAAAAkAAAAUCAYAAABf2RdVAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3QIEFCo6JZ5/UAAAAHZJREFUKM/tz6ENwnAUxOEvxRVDakpQWIIlYQAWwBVRg+owXaQrNGGCLsEEUFOBxPzFEw0LlF9y4i4vl3ssgRxXlCFrsIEsBRlOqJLfosY6Hk144JL8HT1GWIX6D47Y44wOz7ltN7zQohC2RIag969PD9j5E/kCrNsObALFHQoAAAAASUVORK5CYII="
,CLEAR:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAA+klEQVR4nOXUsS5EQRQG4M/awhKNSBR0tlCQqD2BQqPXeoCttbyBRq0TovECPIJEpxGdKESxFhGKnZtMbnbmzi6dk5zMP3PO+c8/mcnhj22qIb6D1SjvC9e4naRZD98j/AMb45LN4glntfM5POK8hKSfUFTiFxVJOyLsYQ9rOCoQsIgDnOAylXSM+5LroBvUbceHrUzBQnBYwnzAK5hJFeUIT4PDDQ4DfsB+qqidCmC6hqt9qxYrVjiR/UPC3KO8Gf6zCvcDHoT92IS7EY6HQSes3RLCV8PP3MFnphksh/Ull7SJd+VD4a4uatSAXceW5gcb4ArPDXm/sx+kZD+DMYVGNwAAAABJRU5ErkJggg=="
,SAVE:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAABBElEQVR4nLXUPS9EQRTG8Z+LZGO/gEh0qHQKahW+Cg3N6snqJTo1nU6j8SF0tBK0u9ZLJFaxI5mM+7r4JydnztxznpwzNzP8MRPBr2E1ist4wTXuypL6GDawD+yWCQ6xg4Wc4uWQ0wpxBydhvZ8KTVXNh7fED7CNdxwFjcMmgkXsGY1+gB6OIatR2Ep8TAen6GI6T3BgdDYxN2HvNcTPyfcLtDHPz5EfsIGlgm77OEv2vhvI8gThKthY1DnDRuR1uKV45JgnnFcJzuGyQUP36UY68kzwm0b3usgWQ167SvDX/OtPyTAZrcuuZZyXS0+z5yu1T8zGHa5jRb0HNo9bPI5ZW84XFDdHpTksweMAAAAASUVORK5CYII="
,PERIODIC_TABLE:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAlUlEQVR4nOXRMQoCMRCF4W9zCS0ED6D38zrewkbBQjzLai1WK2uTYtVkZbMWig+GF+YnTF6GX9AWbacarMawNlGbeGkwC5lXVz2JelnAOQFO0QezCnMsO5MbHHApZJ/XH275lAB19MGswgwLj9s64lrCcpFHqfb6uetSFjBJDJlGH8xykdtM/y0L2D01b9jHcyn7Yt0Bunx304NWr/0AAAAASUVORK5CYII="
,MARQUEE:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAqklEQVR4nO3UMQrCQBSE4c9gJZozpLL3EJ7ESrAXvIBHsPAYlpYewF4bxRtoaRELsxBCghuwSJGBhd03w/92i310XYPKeYQ5shqvqhdOuDQFssLMW6w3Vk3AAx6Y/bhZUIp9AZ02PWETCStDcyxCISmZYzxbAkN+Ugf8i3pgD4xXXge8i/92QSF/C4VhydxhW+zPEbAUS1xxrAskWBfdYibNy3egZBHNO6QP/qcsDeP7PVMAAAAASUVORK5CYII="
,OPEN:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAA4klEQVR4nM3SP0tCURjH8c+VQAgEJwOhtmbHFsHRqbUX0GvwTTQ19WduDdxafAviYFNTQYOEQ5PoUt0G76WD5EXPdfAHz3Cec/jy+z3nYd+V4BYdVIP+FNd4jIGma+oH7W1hlYK7BOcRBtc6LKovDNHaFTCv1yzJzoApjkNY0Qw3VbgdDv55MMEDRphtAJyEh8TSdq479DDHEWpbOIUP/mZxkzW7GIub53sOHFjGv8B3JCzFJbygjjMsSsCu8tynOMnyx8L6gn2s4bkEbITD8GeeSsDe0LSizwjQFPdorML2X79XIbKYLBWgYwAAAABJRU5ErkJggg=="
,CALCULATE:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAsElEQVR4nM3UPw4BQRSA8d+KChGt2mUoVBRKjVIr7sExXEJcg9oJSIRkNSPWho3EK3zJ5L359+XNTDIEk2GKToDrhm2GPED24AqLIFkDeR3nHySbFI+YQ71icR+t0sYyoxQPj4Eq4Rq9lGdVZRapfbvwW6oqLLNCN+XjCOHA8wo+En7kojBPbR8lDOH/hcVXHqZ4SnGGZmG+3H+3ByyT+NfWRh79fV0yTMR9sLsAzyt3PUEZP6T1UD8AAAAASUVORK5CYII="
,OPTIMIZE:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAABU0lEQVR4nO3TvU4UYRjF8Z9gKSKxkY+EqBcgFQJegQk3QEeWO5CGS7CyNsZpLEiMMdS0NBCWhhIogLCrietXYiIkGJfifUZe38TFhm5P8mRmzpz558nMGfoK3cIi3uMQpzGH4S1G5koN4hk+oxvzDe9wnHlddCI7+C/YOLYi/DGOGxjBXbwtgHVmE2Ml7AFO8AMLWIvzCTzH7wLWjcxC5E5wv4bdxj6+4FF4HazHdQmq51Nkp/AVe8FS4Rxz2can2MWbHsCfWf5JMF4LelW8gp0eoHqaxTNVsFQ4w3R2c+k/gEtZ/nEwKhjGAdrSx4EbWO0BW40MPMSHYAzLzFas/DS8ASyHX4NaUvcGIjMv9bQdjL80gW2pIi8xmW17L6beahKvItuMZ/+Ec92MDVZwRyr6plRiGMUsZvBd6ugL/Cq3KzWEhlTeI5f/8lF4jcj0dQ26AMERgSsZ2O2AAAAAAElFTkSuQmCC"
,ZOOM_OUT:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAABX0lEQVR4nK3TsUocURTG8d9uggQ1pRBQWcwLWImxDSEvkMY0xkIL8QHskiIIYm+haSWRWItFRJBUWhhEsLEIATdqK64oREwxs3C5c2dHYj44cOfOd/5nzrl3aorqwzheYxB/8BMbWEcrkZNUDXO4wF1JnOLtfWB1rHUAxfGhCvgxSljFGLrxFK/wLfKMl8GGcBMYp0p8NSwGvt95wYIWAtNSRSe16EvfpUwHgaFRASRrv+3/Gr98LGsZzvEL0+hJgG7xCbvB3vNUxVZerRk9x3GLAdnc2nuHMayOk3z9THape2SziuNR7h0O8k9EqmM7WM+kWog0G6y/pwwjQQs3eNkBNhV4r2UjSGo1gr6Xtd9WQ3alwpl+7tRGL/YVD6GJM+WHNFEF/VKS3I4WjiJo8nKHeoEVHOMKl/iBefTnhXci6GQVtErd2Iqgbx4KfYLNAFr4Df9FXVjGHkb/B7Cgv5jGhx/n4WU1AAAAAElFTkSuQmCC"
,UNDO:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAA60lEQVR4nL3SzSqFQRgH8N85nTp1bCxcgGTNFQjlBlyAj/cyXICdW5CVsrKQlZSdXIA1pVNSKCIWODbz1pzx8U7O5F9PM01Pv3mmhn/KIo7QK4U9Y4DpktifwE60X8Ch4WfOBXSAVzyhj5smeD6ZrKnucYAVdEfF0rrEUgxejYDV9YblGlzFewH0ARM1ulYI3WhFT1/HNtrR2SZuw76LMUxiFjO+5iQ9qJJJf/uHU9hPJux/11jhIwOssxOBLz81VeG28Qywh7sAPmb0Z2U3gGftps7MXIT1uBR4Hda9UmALpzgvBXawVcgazieZon6IAS5PwwAAAABJRU5ErkJggg=="
,ZOOM_IN:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAABhklEQVR4nK3UvWtUQRTG4WejSAixFAxRNlm0tgiCaVKYGCwMWChaWEka8Q+wkTQiiL2F1kICqUOKhIBFChEUIdi44Ad+tuIKqwmxmFk4jPdmA/HAcGfOfd/fma97G/6NY7iOWZzENt5hBcvoVHgqo4E7+IHdmvYF1/YDG8DSHqCy3e0HvFcYnmISQziKGawVmqt1sHF0g3A+vBvDodxv4GHQfcJgFfBBED0qCu3iQsg1ipneqAK+DoJmyJ/KuYuFfibol0rY4TwT+I4PmJL2biTnJ/JzBxt4Hvytqhl2crXPwVh3umO5WG+8VcIGpM2F49KlbuI0pnP+Zh638B5ngv9rFXAj9G/lAm18DKa29LXA7eDfrFry2bCELs7n/Im8/KmgnQ/abTV7SLrIEbogLb8XTelKxf1crIPBMF4Whh3poL6pPqAu5vpBF2vMvdbBmzD+jct7QeEcnuAtfuEnXuE+RnPhZwX0Sj9ovxjCeoD+waWDQgexGqDLBwXCETzGC+l39//jL+Tukd8B6MLTAAAAAElFTkSuQmCC"
,MOVE:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAABNUlEQVR4nKXUvUoDQRTF8Z/G+AGiVmYre6uglYWNpLGx8BXEBxAsUuQRfAHBTu0FRdRGGwWFoNj4AIIPISJa5AbGJdlN4oELw7lz/rOzM7uUaxY3UbMDzC/UHB7wE3Uf3khawFMC69Yj5kcBNnvAutUcBVhFHQcJ6CC8ar/QeAHwC6/4SLyP8L4GAWY4wmLxg/9RLTJZHljDLXaxOgRwJTK3wTAWgzssx6QLvCehOtZjfK+z5a6WsBXjN2xAW//THLba43gZYotleqbzHk+SVVrYTOow6R3meq2kdyw55ApOo9HIrbqXhPZyvUb4p3pcwQq2MTkEcCoyla4xkTS/cZZfpUSf+UzRl5JhB2uJtxZe1jNRon39r8f+KMCqziXPw84V/BzKNIXrBHYV3r80g8uo6bLJvys8ZaSWnX3KAAAAAElFTkSuQmCC"
,LASSO:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAABUUlEQVR4nK3UsUocURQG4C/L2ki2SKEgiOWmsQkuYiEituITCJLWECEQEAuRPECqrXyBhBQRRW1strC10ARsbEIgoKTJuqAEQzTFvQuTYXZmdpMfDnfuf879z7nnzAzZeII93EfbjdzAeI82XmAVP/DuXwQ7eJPYb0auEJUefE2osIt25AYW7IVFDP1PwUPc4Steo4FHyYBq4nkUM8IA0jgQBvUMs6jjbfS1sITb5IFpoU8PCXtVUO2Y0IIbbKWdLXyKmedwVEKwiw84TpPX2EhxwyUFt3GWJj/jEiv6H1QL+2myjlOhdyd4WlKshp9Yz3JW8FyYchsLJQSXYxGTeUF1fImZ5wsEd3BRIrFxoafnBXHf0UwS1R6B3/ARL7EmXCsLI8JtCgXhd1ybOTHSyfp9RbroYCrLkSf4K8f3WGgH4WdRCg1c+fv7TtsFJpKH/gBbI0oH8xmBIgAAAABJRU5ErkJggg=="
,REDO:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAA8klEQVR4nM3UMUoDQRQG4E+JEIyFhUEEC4vcQy20sLRX1FuIZ8gVLNJZWImVlY1gKdZCEG1EUqgJCkYtdgLrsJslOIUPHiwz/34zDLPLP6gGLrCeCmzhG32spQQL0VrFy4tYxhzqmMJSbn4W59jCZRFQxw7O0MvtpKrfsBpjG+hOgIxFt/H5B2zU99DESwJsiF04TInVsBkfZqib0F0M8BHGF3CUy33hAJ3RwGO02ilWShbh9z0cYi8OvOcCx2OgGCzE4DUEnmUXtarm8YD9ssB1ADtlgUlqWvbngLtU4El4fkoF3uJK9uEnAaGNmRRg8voBSW1+KcdEe0oAAAAASUVORK5CYII="
,SEARCH:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAABOklEQVR4nK3TvyuFURjA8c+9BlFGpSRZLZhklfwDFjEo3UX+AJuBRRZFVhZFzCYmkyJlYTT4OQu5dS+G994c7z33vpc89dRT7/d8z/uc85yc2ujEJMbRgxJucIgDvEbWRCOHBTzjs04+YroZWR57DUTpXMoSLqcW7GAE7ejAGI5SzFQ9WR+KAViow+WwGnAPlQ1rYiWANjM6yaX+dCYGXQZAb4aQpP0qvx8Dqrf61ISM5EyrwvP0xzxaKnW5SWHItcaEt5W6SzLUWTEQ1Hcx4XFQzzUhnA/qkxgwhA/JmRQx2kBW8H1+7+iuB24HYBGLfrbfKxmpcLB3G7XRjtPUgjLuJbcfe34fmG0kbcOW7/ZjWcLFb6QwiA1c4wVvuMI6+iVjtvNbaVbEpBP/LY0+w79I13CG4f8Q1sQX3DZ71qLPo9EAAAAASUVORK5CYII="
,ERASE:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAA9UlEQVR4nK3UoUoEQRgH8N+KINhEiwaT7aJFDtRiswlisWjzBWy+gYJwYNZmFt/ABxAOqyiCRcFgE8Qz7ByMq+443vxhw7ez8/tmd5ittGcHi1F9j8PEnF9T4RmD6Lr8LwadBjbA5ijgXgN7wURq0ljL2GqjPsdbCqxaxh4xF9VLeMJKaDaPtVSDYRZ8fd0PPDTunf0Vg13fN6TZoJMDnibAixwMbqOV9NHDawR2c8F9bGA61LMRdpWL/ZStCFwvAZ4ErF8Cg5sAbpfAZtSbc4fx1MNtR2+YZfWJOsL7SEsLOVb/xiZLYHCNg1JYpf52U6XA7HwCpxpHmyjPzt0AAAAASUVORK5CYII="
,LASSO_SHAPES:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAABUUlEQVR4nK3UsUocURQG4C/L2ki2SKEgiOWmsQkuYiEituITCJLWECEQEAuRPECqrXyBhBQRRW1strC10ARsbEIgoKTJuqAEQzTFvQuTYXZmdpMfDnfuf879z7nnzAzZeII93EfbjdzAeI82XmAVP/DuXwQ7eJPYb0auEJUefE2osIt25AYW7IVFDP1PwUPc4Steo4FHyYBq4nkUM8IA0jgQBvUMs6jjbfS1sITb5IFpoU8PCXtVUO2Y0IIbbKWdLXyKmedwVEKwiw84TpPX2EhxwyUFt3GWJj/jEiv6H1QL+2myjlOhdyd4WlKshp9Yz3JW8FyYchsLJQSXYxGTeUF1fImZ5wsEd3BRIrFxoafnBXHf0UwS1R6B3/ARL7EmXCsLI8JtCgXhd1ybOTHSyfp9RbroYCrLkSf4K8f3WGgH4WdRCg1c+fv7TtsFJpKH/gBbI0oH8xmBIgAAAABJRU5ErkJggg=="}}();
    (function(a,d,f){a.Button=function(a,e,b,d){this.id=a;this.icon=e;this.toggle=!1;this.tooltip=b?b:"";this.func=d?d:void 0;return!0};a.Button.prototype.getElement=function(){return f("#"+this.id)};a.Button.prototype.getSource=function(a){var e=[];this.toggle?(e.push('<input type="radio" name="'),e.push(a),e.push('" id="'),e.push(this.id),e.push('" title="'),e.push(this.tooltip),e.push('" /><label for="'),e.push(this.id),e.push('"><img id="'),e.push(this.id),e.push('_icon" title="'),e.push(this.tooltip),
e.push('" width="20" height="20" src="'),e.push(d.getURI(this.icon)),e.push('"></label>')):(e.push('<button id="'),e.push(this.id),e.push('" onclick="return false;" title="'),e.push(this.tooltip),e.push('"><img title="'),e.push(this.tooltip),e.push('" width="20" height="20" src="'),e.push(d.getURI(this.icon)),e.push('"></button>'));return e.join("")};a.Button.prototype.setup=function(a){var e=this.getElement();(!this.toggle||a)&&e.button();e.click(this.func)};a.Button.prototype.disable=function(){var a=
this.getElement();a.mouseout();a.button("disable")};a.Button.prototype.enable=function(){this.getElement().button("enable")};a.Button.prototype.select=function(){var a=this.getElement();a.attr("checked",!0);a.button("refresh")}})(ChemDoodle.sketcher.gui.desktop,ChemDoodle.sketcher.gui.imageDepot,jQuery);
(function(a,d){a.ButtonSet=function(a){this.id=a;this.buttons=[];return this.toggle=!0};a.ButtonSet.prototype.getElement=function(){return d("#"+this.id)};a.ButtonSet.prototype.getSource=function(a){var c=[];c.push('<span id="');c.push(this.id);c.push('">');for(var e=0,b=this.buttons.length;e<b;e++)this.toggle&&(this.buttons[e].toggle=!0),c.push(this.buttons[e].getSource(a));this.dropDown&&c.push(this.dropDown.getButtonSource());c.push("</span>");this.dropDown&&c.push(this.dropDown.getHiddenSource());
return c.join("")};a.ButtonSet.prototype.setup=function(){this.getElement().buttonset();for(var a=0,c=this.buttons.length;a<c;a++)this.buttons[a].setup(!1);this.dropDown&&this.dropDown.setup()};a.ButtonSet.prototype.addDropDown=function(d){this.dropDown=new a.DropDown(this.id+"_dd",d,this.buttons[this.buttons.length-1])}})(ChemDoodle.sketcher.gui.desktop,jQuery);
(function(a,d,f){a.Dialog=function(a,e,b){this.sketcherid=a;this.id=a+e;this.title=b?b:"Information";this.afterMessage=this.message=this.buttons=void 0;this.includeTextField=this.includeTextArea=!1;return!0};a.Dialog.prototype.getElement=function(){return d("#"+this.id)};a.Dialog.prototype.getTextArea=function(){return d("#"+this.id+"_ta")};a.Dialog.prototype.getTextField=function(){return d("#"+this.id+"_tf")};a.Dialog.prototype.setup=function(){var a=[];a.push('<div style="font-size:12px;" id="');
a.push(this.id);a.push('" title="');a.push(this.title);a.push('">');this.message&&(a.push("<p>"),a.push(this.message),a.push("</p>"));this.includeTextField&&(a.push('<input type="text" style="font-family:\'Courier New\';" id="'),a.push(this.id),a.push('_tf"></input>'));this.includeTextArea&&(a.push('<textarea style="font-family:\'Courier New\';" id="'),a.push(this.id),a.push('_ta" cols="55" rows="10"></textarea>'));this.afterMessage&&(a.push("<p>"),a.push(this.afterMessage),a.push("</p>"));a.push("</div>");
f.getElementById(this.sketcherid)?d("#"+this.sketcherid).before(a.join("")):f.writeln(a.join(""));this.getElement().dialog({autoOpen:!1,width:435,buttons:this.buttons})}})(ChemDoodle.sketcher.gui.desktop,jQuery,document);
(function(a,d,f,c){d.MolGrabberDialog=function(a,b){this.sketcherid=a;this.id=a+b;this.title="MolGrabber";return!0};d.MolGrabberDialog.prototype=new d.Dialog;d.MolGrabberDialog.prototype.setup=function(){var a=[];a.push('<div style="font-size:12px;text-align:center;" id="');a.push(this.id);a.push('" title="');a.push(this.title);a.push('">');this.message&&(a.push("<p>"),a.push(this.message),a.push("</p>"));a.push('<canvas class="ChemDoodleWebComponent" id="');a.push(this.id);a.push('_mg"></canvas>');
this.afterMessage&&(a.push("<p>"),a.push(this.afterMessage),a.push("</p>"));a.push("</div>");c.getElementById(this.sketcherid)?f("#"+this.sketcherid).before(a.join("")):c.writeln(a.join(""));this.canvas=new ChemDoodle.MolGrabberCanvas(this.id+"_mg",200,200);this.getElement().dialog({autoOpen:!1,width:250,buttons:this.buttons})}})(ChemDoodle,ChemDoodle.sketcher.gui.desktop,jQuery,document);
(function(a,d,f,c){d.PeriodicTableDialog=function(a,b){this.sketcherid=a;this.id=a+b;this.title="Periodic Table";return!0};d.PeriodicTableDialog.prototype=new d.Dialog;d.PeriodicTableDialog.prototype.setup=function(){var a=[];a.push('<div style="text-align:center;" id="');a.push(this.id);a.push('" title="');a.push(this.title);a.push('">');a.push('<canvas class="ChemDoodleWebComponents" id="');a.push(this.id);a.push('_pt"></canvas></div>');c.getElementById(this.sketcherid)?f("#"+this.sketcherid).before(a.join("")):
c.writeln(a.join(""));this.canvas=new ChemDoodle.PeriodicTableCanvas(this.id+"_pt",20);this.getElement().dialog({autoOpen:!1,width:400,buttons:this.buttons})}})(ChemDoodle,ChemDoodle.sketcher.gui.desktop,jQuery,document);
(function(a,d,f,c){d.SaveFileDialog=function(a,b){this.id=a;this.sketcher=b;this.title="Save File";return!0};d.SaveFileDialog.prototype=new d.Dialog;d.SaveFileDialog.prototype.clear=function(){f("#"+this.id+"_link").html("The file link will appear here.")};d.SaveFileDialog.prototype.setup=function(){var a=[];a.push('<div style="font-size:12px;" id="');a.push(this.id);a.push('" title="');a.push(this.title);a.push('">');a.push("<p>Select the file format to save your structure to and click on the <strong>Generate File</strong> button.</p>");
a.push('<select id="');a.push(this.id);a.push('_select">');a.push('<option value="sk2">ACD/ChemSketch Document {sk2}');a.push('<option value="ros">Beilstein ROSDAL {ros}');a.push('<option value="cdx">Cambridgesoft ChemDraw Exchange {cdx}');a.push('<option value="cdxml">Cambridgesoft ChemDraw XML {cdxml}');a.push('<option value="mrv">ChemAxon Marvin Document {mrv}');a.push('<option value="cml">Chemical Markup Language {cml}');a.push('<option value="smiles">Daylight SMILES {smiles}');a.push('<option value="icl" selected>iChemLabs ChemDoodle Document {icl}');
a.push('<option value="inchi">IUPAC InChI {inchi}');a.push('<option value="jdx">IUPAC JCAMP-DX {jdx}');a.push('<option value="skc">MDL ISIS Sketch {skc}');a.push('<option value="tgf">MDL ISIS Sketch Transportable Graphics File {tgf}');a.push('<option value="mol">MDL MOLFile {mol}');a.push('<option value="sdf">MDL SDFile {sdf}');a.push('<option value="jme">Molinspiration JME String {jme}');a.push('<option value="pdb">RCSB Protein Data Bank {pdb}');a.push('<option value="mmd">Schr&ouml;dinger Macromodel {mmd}');
a.push('<option value="mae">Schr&ouml;dinger Maestro {mae}');a.push('<option value="smd">Standard Molecular Data {smd}');a.push('<option value="mol2">Tripos Mol2 {mol2}');a.push('<option value="sln">Tripos SYBYL SLN {sln}');a.push('<option value="xyz">XYZ {xyz}');a.push("</select>");a.push('<button id="');a.push(this.id);a.push('_button">');a.push("Generate File</button>");a.push("<p>When the file is written, a link will appear in the red-bordered box below, right-click on the link and choose the browser's <strong>Save As...</strong> function to save the file to your computer.</p>");
a.push('<div style="width:100%;height:30px;border:1px solid #c10000;text-align:center;" id="');a.push(this.id);a.push('_link">The file link will appear here.</div>');a.push('<p><a href="http://www.chemdoodle.com" target="_blank">How do I use these files?</a></p>');a.push("</div>");c.getElementById(this.sketcher.id)?f("#"+this.sketcher.id).before(a.join("")):c.writeln(a.join(""));var b=this;f("#"+this.id+"_button").click(function(){f("#"+b.id+"_link").html("Generating file, please wait...");ChemDoodle.iChemLabs.saveFile(b.sketcher.oneMolecule?
b.sketcher.molecules[0]:b.sketcher.lasso.getFirstMolecule(),{ext:f("#"+b.id+"_select").val()},function(a){f("#"+b.id+"_link").html('<a href="'+a+'"><span style="text-decoration:underline;">File is generated. Right-click on this link and Save As...</span></a>')})});this.getElement().dialog({autoOpen:!1,width:435,buttons:b.buttons})}})(ChemDoodle,ChemDoodle.sketcher.gui.desktop,jQuery,document);
(function(a,d,f,c,e){f.DialogManager=function(b){b.useServices?this.saveDialog=new c.SaveFileDialog(b.id+"_save_dialog",b):(this.saveDialog=new c.Dialog(b.id,"_save_dialog","Save Molecule"),this.saveDialog.message="Copy and paste the content of the textarea into a file and save it with the extension <strong>.mol</strong>.",this.saveDialog.includeTextArea=!0,this.saveDialog.afterMessage='<a href="http://www.chemdoodle.com" target="_blank">How do I use MOLFiles?</a>');this.saveDialog.setup();this.loadDialog=
new c.Dialog(b.id,"_load_dialog","Load Molecule");this.loadDialog.message="Copy and paste the contents of a MOLFile (extension <strong>.mol</strong>) in the textarea below and then press the <strong>Load</strong> button.";this.loadDialog.includeTextArea=!0;this.loadDialog.afterMessage='<a href="http://www.chemdoodle.com" target="_blank">Where do I get MOLFiles?</a>';var f=this;this.loadDialog.buttons={Load:function(){e(this).dialog("close");var c=a.readMOL(f.loadDialog.getTextArea().val());if(c.atoms.length>
0)if(b.oneMolecule)b.historyManager.pushUndo(new d.SwitchMoleculeAction(b,c));else{b.historyManager.pushUndo(new d.NewMoleculeAction(b,c.atoms,c.bonds));b.toolbarManager.buttonLasso.getElement().click();b.lasso.select(c.atoms,[])}else alert("No chemical content was recognized.")}};this.loadDialog.setup();this.searchDialog=new c.MolGrabberDialog(b.id,"_search_dialog");this.searchDialog.buttons={Load:function(){e(this).dialog("close");var a=f.searchDialog.canvas.molecules[0];if(a&&a.atoms.length>0)if(b.oneMolecule)a!==
b.molecule&&b.historyManager.pushUndo(new d.SwitchMoleculeAction(b,a));else{b.historyManager.pushUndo(new d.NewMoleculeAction(b,a.atoms,a.bonds));b.toolbarManager.buttonLasso.getElement().click();b.lasso.select(a.atoms,[])}}};this.searchDialog.setup();this.periodicTableDialog=new c.PeriodicTableDialog(b.id,"_periodicTable_dialog");this.periodicTableDialog.buttons={Close:function(){e(this).dialog("close")}};this.periodicTableDialog.setup();this.periodicTableDialog.canvas.click=function(){if(this.hovered){this.selected=
this.hovered;var a=this.getHoveredElement();b.stateManager.setState(b.stateManager.STATE_LABEL);b.stateManager.STATE_LABEL.label=a.symbol;b.toolbarManager.buttonLabel.select();this.repaint()}};this.calculateDialog=new c.Dialog(b.id,"_calculate_dialog","Calculations");this.calculateDialog.includeTextArea=!0;this.calculateDialog.afterMessage='<a href="http://www.chemdoodle.com" target="_blank">Want more calculations?</a>';this.calculateDialog.setup();this.inputDialog=new c.Dialog(b.id,"_input_dialog",
"Input");this.inputDialog.message='Please input the rgroup number (must be a positive integer). Input "-1" to remove the rgroup.';this.inputDialog.includeTextField=!0;this.inputDialog.buttons={Done:function(){e(this).dialog("close");f.inputDialog.doneFunction&&f.inputDialog.doneFunction(f.inputDialog.getTextField().val())}};this.inputDialog.setup();return!0}})(ChemDoodle,ChemDoodle.sketcher.actions,ChemDoodle.sketcher.gui,ChemDoodle.sketcher.gui.desktop,jQuery);
(function(a,d,f,c){a.DropDown=function(c,b,d){this.id=c;this.tooltip=b;this.dummy=d;this.buttonSet=new a.ButtonSet(c+"_set");this.buttonSet.buttonGroup=b;this.defaultButton=void 0;return!0};a.DropDown.prototype.getButtonSource=function(){var a=[];a.push('<button id="');a.push(this.id);a.push('" onclick="return false;" title="');a.push(this.tooltip);a.push('"><img title="');a.push(this.tooltip);a.push('" src="');a.push(d.getURI(d.ARROW_DOWN));a.push('"></button>');return a.join("")};a.DropDown.prototype.getHiddenSource=
function(){var a=[];a.push('<div style="display:none;position:absolute;z-index:10;border:1px #C1C1C1 solid;background:#F5F5F5;padding:5px;border-bottom-left-radius:5px;-moz-border-radius-bottomleft:5px;border-bottom-right-radius:5px;-moz-border-radius-bottomright:5px;" id="');a.push(this.id);a.push('_hidden">');a.push(this.buttonSet.getSource(this.id+"_popup_set"));a.push("</div>");return a.join("")};a.DropDown.prototype.setup=function(){this.defaultButton||(this.defaultButton=this.buttonSet.buttons[0]);
var a="#"+this.id;f(a).button();f(a+"_hidden").hide();f(a).click(function(){var b=f(a+"_hidden");b.show().position({my:"center top",at:"center bottom",of:this,collision:"fit"});f(c).one("click",function(){b.hide()});return false});this.buttonSet.setup();var b=this;f.each(this.buttonSet.buttons,function(a){b.buttonSet.buttons[a].getElement().click(function(){b.dummy.absorb(b.buttonSet.buttons[a]);b.dummy.select();b.dummy.func()})});b.dummy.absorb(this.defaultButton);this.defaultButton.select()}})(ChemDoodle.sketcher.gui.desktop,
ChemDoodle.sketcher.gui.imageDepot,jQuery,document);
(function(a,d,f){a.DummyButton=function(a,d,b){this.id=a;this.icon=d;this.toggle=!1;this.tooltip=b?b:"";this.func=void 0;return!0};a.DummyButton.prototype=new a.Button;a.DummyButton.prototype.setup=function(){var a=this;this.getElement().click(function(){a.func()})};a.DummyButton.prototype.absorb=function(a){f("#"+this.id+"_icon").attr("src",d.getURI(a.icon));this.func=a.func}})(ChemDoodle.sketcher.gui.desktop,ChemDoodle.sketcher.gui.imageDepot,jQuery);
(function(a,d,f,c,e,b,h,j,m,g,l,n){b.ToolbarManager=function(i){this.sketcher=i;this.buttonOpen=new j.Button(i.id+"_button_open",h.OPEN,"Open",function(){i.dialogManager.loadDialog.getTextArea().val("");i.dialogManager.loadDialog.getElement().dialog("open")});this.buttonSave=new j.Button(i.id+"_button_save",h.SAVE,"Save",function(){i.useServices?i.dialogManager.saveDialog.clear():i.oneMolecule?i.dialogManager.saveDialog.getTextArea().val(a.writeMOL(i.molecules[0])):i.lasso.isActive()&&i.dialogManager.saveDialog.getTextArea().val(a.writeMOL(i.lasso.getFirstMolecule()));
i.dialogManager.saveDialog.getElement().dialog("open")});this.buttonSearch=new j.Button(i.id+"_button_search",h.SEARCH,"Search",function(){i.dialogManager.searchDialog.getElement().dialog("open")});this.buttonCalculate=new j.Button(i.id+"_button_calculate",h.CALCULATE,"Calculate",function(){var a=i.oneMolecule?i.molecules[0]:i.lasso.getFirstMolecule();a&&d.calculate(a,{descriptors:"mf,mw,miw,deg_unsat,hba,hbd,pol_miller,cmr,tpsa,xlogp2".split(",")},function(a){function b(a,i,c){g.push(a);g.push(": ");
for(a=a.length+2;30>a;a++)g.push(" ");g.push(i);g.push(" ");g.push(c);g.push("\n")}var g=[];b("Molecular Formula",a.mf,"");b("Molecular Mass",a.mw,"amu");b("Monoisotopic Mass",a.miw,"amu");b("Degree of Unsaturation",a.deg_unsat,"");b("Hydrogen Bond Acceptors",a.hba,"");b("Hydrogen Bond Donors",a.hbd,"");b("Molecular Polarizability",a.pol_miller,"\u00c5\u00b3");b("Molar Refractivity",a.cmr,"cm\u00b3/mol");b("Polar Surface Area",a.tpsa,"\u00c5\u00b2");b("logP",a.xlogp2,"");i.dialogManager.calculateDialog.getTextArea().val(g.join(""));
i.dialogManager.calculateDialog.getElement().dialog("open")})});this.buttonMove=new j.Button(i.id+"_button_move",h.MOVE,"Move",function(){i.stateManager.setState(i.stateManager.STATE_MOVE)});this.buttonMove.toggle=!0;this.buttonErase=new j.Button(i.id+"_button_erase",h.ERASE,"Erase",function(){i.stateManager.setState(i.stateManager.STATE_ERASE)});this.buttonErase.toggle=!0;this.buttonClear=new j.Button(i.id+"_button_clear",h.CLEAR,"Clear",function(){var a=!0;if(i.oneMolecule){if(1===i.molecules[0].atoms.length){var b=
i.molecules[0].atoms[0];"C"===b.label&&0===b.charge&&-1===b.mass&&(a=!1)}}else 0===i.molecules.length&&0===i.shapes.length&&(a=!1);a&&(i.stateManager.getCurrentState().clearHover(),i.lasso&&i.lasso.isActive()&&i.lasso.empty(),i.historyManager.pushUndo(new e.ClearAction(i)))});this.buttonClean=new j.Button(i.id+"_button_clean",h.OPTIMIZE,"Clean",function(){var a=i.oneMolecule?i.molecules[0]:i.lasso.getFirstMolecule();if(a){var b=new f.JSONInterpreter;d._contactServer("optimize",{mol:b.molTo(a)},{dimension:2},
function(g){var g=b.molFrom(g.mol),d=g.getCenter(),f=new c.Point(i.width/2,i.height/2);f.sub(d);for(var d=0,h=g.atoms.length;d<h;d++)g.atoms[d].add(f);i.historyManager.pushUndo(new e.ChangeCoordinatesAction(a.atoms,g.atoms))})}});this.makeLassoSet(this);this.makeScaleSet(this);this.makeHistorySet(this);this.makeLabelSet(this);this.makeBondSet(this);this.makeRingSet(this);this.makeAttributeSet(this);this.makeShapeSet(this);return!0};b.ToolbarManager.prototype.write=function(){var a=[],b=this.sketcher.id+
"_main_group";this.sketcher.oneMolecule?a.push(this.buttonMove.getSource(b)):a.push(this.lassoSet.getSource(b));a.push(this.buttonClear.getSource());a.push(this.buttonErase.getSource(b));this.sketcher.useServices&&a.push(this.buttonClean.getSource());a.push(this.historySet.getSource());a.push(this.scaleSet.getSource());a.push(this.buttonOpen.getSource());a.push(this.buttonSave.getSource());this.sketcher.useServices&&(a.push(this.buttonSearch.getSource()),a.push(this.buttonCalculate.getSource()));
a.push("<br>");a.push(this.labelSet.getSource(b));a.push(this.attributeSet.getSource(b));a.push(this.bondSet.getSource(b));a.push(this.ringSet.getSource(b));this.sketcher.oneMolecule||a.push(this.shapeSet.getSource(b));a.push("<br>");n.getElementById(this.sketcher.id)?l("#"+this.sketcher.id).before(a.join("")):n.write(a.join(""))};b.ToolbarManager.prototype.setup=function(){this.sketcher.oneMolecule?this.buttonMove.setup(!0):this.lassoSet.setup();this.buttonClear.setup();this.buttonErase.setup(!0);
this.sketcher.useServices&&this.buttonClean.setup();this.historySet.setup();this.scaleSet.setup();this.buttonOpen.setup();this.buttonSave.setup();this.sketcher.useServices&&(this.buttonSearch.setup(),this.buttonCalculate.setup());this.labelSet.setup();this.attributeSet.setup();this.bondSet.setup();this.ringSet.setup();this.sketcher.oneMolecule||this.shapeSet.setup();this.buttonSingle.select();this.buttonUndo.disable();this.buttonRedo.disable();!this.sketcher.oneMolecule&&this.sketcher.useServices&&
(this.buttonClean.disable(),this.buttonCalculate.disable(),this.buttonSave.disable())};b.ToolbarManager.prototype.makeScaleSet=function(a){this.scaleSet=new j.ButtonSet(a.sketcher.id+"_buttons_scale");this.scaleSet.toggle=!1;this.buttonScalePlus=new j.Button(a.sketcher.id+"_button_scale_plus",h.ZOOM_IN,"Increase Scale",function(){a.sketcher.specs.scale*=1.5;a.sketcher.checkScale();a.sketcher.repaint()});this.scaleSet.buttons.push(this.buttonScalePlus);this.buttonScaleMinus=new j.Button(a.sketcher.id+
"_button_scale_minus",h.ZOOM_OUT,"Decrease Scale",function(){a.sketcher.specs.scale/=1.5;a.sketcher.checkScale();a.sketcher.repaint()});this.scaleSet.buttons.push(this.buttonScaleMinus)};b.ToolbarManager.prototype.makeLassoSet=function(a){this.lassoSet=new j.ButtonSet(a.sketcher.id+"_buttons_lasso");this.buttonLasso=new j.DummyButton(a.sketcher.id+"_button_lasso",h.LASSO,"Selection Tool");this.lassoSet.buttons.push(this.buttonLasso);this.lassoSet.addDropDown("More Selection Tools");this.lassoSet.dropDown.buttonSet.buttons.push(new j.Button(a.sketcher.id+
"_button_lasso_lasso",h.LASSO,"Lasso Tool",function(){a.sketcher.stateManager.setState(a.sketcher.stateManager.STATE_LASSO);a.sketcher.lasso.mode=m.Lasso.MODE_LASSO;0<a.sketcher.molecules.length&&!a.sketcher.lasso.isActive()&&a.sketcher.lasso.select(a.sketcher.molecules[a.sketcher.molecules.length-1].atoms,[])}));this.lassoSet.dropDown.buttonSet.buttons.push(new j.Button(a.sketcher.id+"_button_lasso_shapes",h.LASSO_SHAPES,"Lasso Tool (shapes only)",function(){a.sketcher.stateManager.setState(a.sketcher.stateManager.STATE_LASSO);
a.sketcher.lasso.mode=m.Lasso.MODE_LASSO_SHAPES;0<a.sketcher.shapes.length&&!a.sketcher.lasso.isActive()&&a.sketcher.lasso.select([],[a.sketcher.shapes[a.sketcher.shapes.length-1]])}));this.lassoSet.dropDown.buttonSet.buttons.push(new j.Button(a.sketcher.id+"_button_lasso_marquee",h.MARQUEE,"Marquee Tool",function(){a.sketcher.stateManager.setState(a.sketcher.stateManager.STATE_LASSO);a.sketcher.lasso.mode=m.Lasso.MODE_RECTANGLE_MARQUEE;0<a.sketcher.molecules.length&&!a.sketcher.lasso.isActive()&&
a.sketcher.lasso.select(a.sketcher.molecules[a.sketcher.molecules.length-1].atoms,[])}))};b.ToolbarManager.prototype.makeHistorySet=function(a){this.historySet=new j.ButtonSet(a.sketcher.id+"_buttons_history");this.historySet.toggle=!1;this.buttonUndo=new j.Button(a.sketcher.id+"_button_undo",h.UNDO,"Undo",function(){a.sketcher.historyManager.undo()});this.historySet.buttons.push(this.buttonUndo);this.buttonRedo=new j.Button(a.sketcher.id+"_button_redo",h.REDO,"Redo",function(){a.sketcher.historyManager.redo()});
this.historySet.buttons.push(this.buttonRedo)};b.ToolbarManager.prototype.makeLabelSet=function(a){this.labelSet=new j.ButtonSet(a.sketcher.id+"_buttons_label");this.buttonLabel=new j.DummyButton(a.sketcher.id+"_button_label",h.CARBON,"Set Label");this.labelSet.buttons.push(this.buttonLabel);this.labelSet.addDropDown("More Labels");this.labelSet.dropDown.buttonSet.buttons.push(new j.Button(a.sketcher.id+"_button_label_h",h.HYDROGEN,"Hydrogen",function(){a.sketcher.stateManager.setState(a.sketcher.stateManager.STATE_LABEL);
a.sketcher.stateManager.STATE_LABEL.label="H"}));this.labelSet.dropDown.buttonSet.buttons.push(new j.Button(a.sketcher.id+"_button_label_c",h.CARBON,"Carbon",function(){a.sketcher.stateManager.setState(a.sketcher.stateManager.STATE_LABEL);a.sketcher.stateManager.STATE_LABEL.label="C"}));this.labelSet.dropDown.defaultButton=this.labelSet.dropDown.buttonSet.buttons[this.labelSet.dropDown.buttonSet.buttons.length-1];this.labelSet.dropDown.buttonSet.buttons.push(new j.Button(a.sketcher.id+"_button_label_n",
h.NITROGEN,"Nitrogen",function(){a.sketcher.stateManager.setState(a.sketcher.stateManager.STATE_LABEL);a.sketcher.stateManager.STATE_LABEL.label="N"}));this.labelSet.dropDown.buttonSet.buttons.push(new j.Button(a.sketcher.id+"_button_label_o",h.OXYGEN,"Oxygen",function(){a.sketcher.stateManager.setState(a.sketcher.stateManager.STATE_LABEL);a.sketcher.stateManager.STATE_LABEL.label="O"}));this.labelSet.dropDown.buttonSet.buttons.push(new j.Button(a.sketcher.id+"_button_label_f",h.FLUORINE,"Fluorine",
function(){a.sketcher.stateManager.setState(a.sketcher.stateManager.STATE_LABEL);a.sketcher.stateManager.STATE_LABEL.label="F"}));this.labelSet.dropDown.buttonSet.buttons.push(new j.Button(a.sketcher.id+"_button_label_cl",h.CHLORINE,"Chlorine",function(){a.sketcher.stateManager.setState(a.sketcher.stateManager.STATE_LABEL);a.sketcher.stateManager.STATE_LABEL.label="Cl"}));this.labelSet.dropDown.buttonSet.buttons.push(new j.Button(a.sketcher.id+"_button_label_br",h.BROMINE,"Bromine",function(){a.sketcher.stateManager.setState(a.sketcher.stateManager.STATE_LABEL);
a.sketcher.stateManager.STATE_LABEL.label="Br"}));this.labelSet.dropDown.buttonSet.buttons.push(new j.Button(a.sketcher.id+"_button_label_i",h.IODINE,"Iodine",function(){a.sketcher.stateManager.setState(a.sketcher.stateManager.STATE_LABEL);a.sketcher.stateManager.STATE_LABEL.label="I"}));this.labelSet.dropDown.buttonSet.buttons.push(new j.Button(a.sketcher.id+"_button_label_p",h.PHOSPHORUS,"Phosphorus",function(){a.sketcher.stateManager.setState(a.sketcher.stateManager.STATE_LABEL);a.sketcher.stateManager.STATE_LABEL.label=
"P"}));this.labelSet.dropDown.buttonSet.buttons.push(new j.Button(a.sketcher.id+"_button_label_s",h.SULFUR,"Sulfur",function(){a.sketcher.stateManager.setState(a.sketcher.stateManager.STATE_LABEL);a.sketcher.stateManager.STATE_LABEL.label="S"}));this.labelSet.dropDown.buttonSet.buttons.push(new j.Button(a.sketcher.id+"_button_label_pt",h.PERIODIC_TABLE,"Choose Symbol",function(){for(var b=0,g=a.sketcher.dialogManager.periodicTableDialog.canvas.cells.length;b<g;b++){var c=a.sketcher.dialogManager.periodicTableDialog.canvas.cells[b];
if(c.element.symbol===a.sketcher.stateManager.STATE_LABEL.label){a.sketcher.dialogManager.periodicTableDialog.canvas.selected=c;a.sketcher.dialogManager.periodicTableDialog.canvas.repaint();break}}a.sketcher.dialogManager.periodicTableDialog.getElement().dialog("open")}))};b.ToolbarManager.prototype.makeBondSet=function(a){this.bondSet=new j.ButtonSet(a.sketcher.id+"_buttons_bond");this.buttonSingle=new j.Button(a.sketcher.id+"_button_bond_single",h.BOND_SINGLE,"Single Bond",function(){a.sketcher.stateManager.setState(a.sketcher.stateManager.STATE_NEW_BOND);
a.sketcher.stateManager.STATE_NEW_BOND.bondOrder=1;a.sketcher.stateManager.STATE_NEW_BOND.stereo=c.Bond.STEREO_NONE});this.bondSet.buttons.push(this.buttonSingle);this.buttonRecessed=new j.Button(a.sketcher.id+"_button_bond_recessed",h.BOND_RECESSED,"Recessed Bond",function(){a.sketcher.stateManager.setState(a.sketcher.stateManager.STATE_NEW_BOND);a.sketcher.stateManager.STATE_NEW_BOND.bondOrder=1;a.sketcher.stateManager.STATE_NEW_BOND.stereo=c.Bond.STEREO_RECESSED});this.bondSet.buttons.push(this.buttonRecessed);
this.buttonProtruding=new j.Button(a.sketcher.id+"_button_bond_protruding",h.BOND_PROTRUDING,"Protruding Bond",function(){a.sketcher.stateManager.setState(a.sketcher.stateManager.STATE_NEW_BOND);a.sketcher.stateManager.STATE_NEW_BOND.bondOrder=1;a.sketcher.stateManager.STATE_NEW_BOND.stereo=c.Bond.STEREO_PROTRUDING});this.bondSet.buttons.push(this.buttonProtruding);this.buttonDouble=new j.Button(a.sketcher.id+"_button_bond_double",h.BOND_DOUBLE,"Double Bond",function(){a.sketcher.stateManager.setState(a.sketcher.stateManager.STATE_NEW_BOND);
a.sketcher.stateManager.STATE_NEW_BOND.bondOrder=2;a.sketcher.stateManager.STATE_NEW_BOND.stereo=c.Bond.STEREO_NONE});this.bondSet.buttons.push(this.buttonDouble);this.buttonBond=new j.DummyButton(a.sketcher.id+"_button_bond",h.BOND_TRIPLE,"Other Bond");this.bondSet.buttons.push(this.buttonBond);this.bondSet.addDropDown("More Bonds");this.bondSet.dropDown.buttonSet.buttons.push(new j.Button(a.sketcher.id+"_button_bond_triple",h.BOND_TRIPLE,"Triple Bond",function(){a.sketcher.stateManager.setState(a.sketcher.stateManager.STATE_NEW_BOND);
a.sketcher.stateManager.STATE_NEW_BOND.bondOrder=3;a.sketcher.stateManager.STATE_NEW_BOND.stereo=c.Bond.STEREO_NONE}));this.bondSet.dropDown.defaultButton=this.bondSet.dropDown.buttonSet.buttons[this.bondSet.dropDown.buttonSet.buttons.length-1];this.bondSet.dropDown.buttonSet.buttons.push(new j.Button(a.sketcher.id+"_button_bond_ambiguous_double",h.BOND_DOUBLE_AMBIGUOUS,"Ambiguous Double Bond",function(){a.sketcher.stateManager.setState(a.sketcher.stateManager.STATE_NEW_BOND);a.sketcher.stateManager.STATE_NEW_BOND.bondOrder=
2;a.sketcher.stateManager.STATE_NEW_BOND.stereo=c.Bond.STEREO_AMBIGUOUS}))};b.ToolbarManager.prototype.makeRingSet=function(a){this.ringSet=new j.ButtonSet(a.sketcher.id+"_buttons_ring");this.buttonCyclohexane=new j.Button(a.sketcher.id+"_button_ring_cyclohexane",h.CYCLOHEXANE,"Cyclohexane Ring",function(){a.sketcher.stateManager.setState(a.sketcher.stateManager.STATE_NEW_RING);a.sketcher.stateManager.STATE_NEW_RING.numSides=6;a.sketcher.stateManager.STATE_NEW_RING.unsaturated=!1});this.ringSet.buttons.push(this.buttonCyclohexane);
this.buttonBenzene=new j.Button(a.sketcher.id+"_button_ring_benzene",h.BENZENE,"Benzene Ring",function(){a.sketcher.stateManager.setState(a.sketcher.stateManager.STATE_NEW_RING);a.sketcher.stateManager.STATE_NEW_RING.numSides=6;a.sketcher.stateManager.STATE_NEW_RING.unsaturated=!0});this.ringSet.buttons.push(this.buttonBenzene);this.buttonRing=new j.DummyButton(a.sketcher.id+"_button_ring",h.CYCLOPENTANE,"Other Ring");this.ringSet.buttons.push(this.buttonRing);this.ringSet.addDropDown("More Rings");
this.ringSet.dropDown.buttonSet.buttons.push(new j.Button(a.sketcher.id+"_button_ring_cyclopropane",h.CYCLOPROPANE,"Cyclopropane Ring",function(){a.sketcher.stateManager.setState(a.sketcher.stateManager.STATE_NEW_RING);a.sketcher.stateManager.STATE_NEW_RING.numSides=3;a.sketcher.stateManager.STATE_NEW_RING.unsaturated=!1}));this.ringSet.dropDown.buttonSet.buttons.push(new j.Button(a.sketcher.id+"_button_ring_cyclobutane",h.CYCLOBUTANE,"Cyclobutane Ring",function(){a.sketcher.stateManager.setState(a.sketcher.stateManager.STATE_NEW_RING);
a.sketcher.stateManager.STATE_NEW_RING.numSides=4;a.sketcher.stateManager.STATE_NEW_RING.unsaturated=!1}));this.ringSet.dropDown.buttonSet.buttons.push(new j.Button(a.sketcher.id+"_button_ring_cyclopentane",h.CYCLOPENTANE,"Cyclopentane Ring",function(){a.sketcher.stateManager.setState(a.sketcher.stateManager.STATE_NEW_RING);a.sketcher.stateManager.STATE_NEW_RING.numSides=5;a.sketcher.stateManager.STATE_NEW_RING.unsaturated=!1}));this.ringSet.dropDown.defaultButton=this.ringSet.dropDown.buttonSet.buttons[this.ringSet.dropDown.buttonSet.buttons.length-
1];this.ringSet.dropDown.buttonSet.buttons.push(new j.Button(a.sketcher.id+"_button_ring_cycloheptane",h.CYCLOHEPTANE,"Cycloheptane Ring",function(){a.sketcher.stateManager.setState(a.sketcher.stateManager.STATE_NEW_RING);a.sketcher.stateManager.STATE_NEW_RING.numSides=7;a.sketcher.stateManager.STATE_NEW_RING.unsaturated=!1}));this.ringSet.dropDown.buttonSet.buttons.push(new j.Button(a.sketcher.id+"_button_ring_cyclooctane",h.CYCLOOCTANE,"Cyclooctane Ring",function(){a.sketcher.stateManager.setState(a.sketcher.stateManager.STATE_NEW_RING);
a.sketcher.stateManager.STATE_NEW_RING.numSides=8;a.sketcher.stateManager.STATE_NEW_RING.unsaturated=!1}))};b.ToolbarManager.prototype.makeAttributeSet=function(a){this.attributeSet=new j.ButtonSet(a.sketcher.id+"_buttons_attribute");this.buttonAttribute=new j.DummyButton(a.sketcher.id+"_button_attribute",h.INCREASE_CHARGE,"Attributes");this.attributeSet.buttons.push(this.buttonAttribute);this.attributeSet.addDropDown("More Attributes");this.attributeSet.dropDown.buttonSet.buttons.push(new j.Button(a.sketcher.id+
"_button_attribute_charge_increment",h.INCREASE_CHARGE,"Increase Charge",function(){a.sketcher.stateManager.setState(a.sketcher.stateManager.STATE_CHARGE);a.sketcher.stateManager.STATE_CHARGE.delta=1}));this.attributeSet.dropDown.buttonSet.buttons.push(new j.Button(a.sketcher.id+"_button_attribute_charge_decrement",h.DECREASE_CHARGE,"Decrease Charge",function(){a.sketcher.stateManager.setState(a.sketcher.stateManager.STATE_CHARGE);a.sketcher.stateManager.STATE_CHARGE.delta=-1}));this.attributeSet.dropDown.buttonSet.buttons.push(new j.Button(a.sketcher.id+
"_button_attribute_lonePair_increment",h.ADD_LONE_PAIR,"Add Lone Pair",function(){a.sketcher.stateManager.setState(a.sketcher.stateManager.STATE_LONE_PAIR);a.sketcher.stateManager.STATE_LONE_PAIR.delta=1}));this.attributeSet.dropDown.buttonSet.buttons.push(new j.Button(a.sketcher.id+"_button_attribute_lonePair_decrement",h.REMOVE_LONE_PAIR,"Remove Lone Pair",function(){a.sketcher.stateManager.setState(a.sketcher.stateManager.STATE_LONE_PAIR);a.sketcher.stateManager.STATE_LONE_PAIR.delta=-1}));this.attributeSet.dropDown.buttonSet.buttons.push(new j.Button(a.sketcher.id+
"_button_attribute_radical_increment",h.ADD_RADICAL,"Add Radical",function(){a.sketcher.stateManager.setState(a.sketcher.stateManager.STATE_RADICAL);a.sketcher.stateManager.STATE_RADICAL.delta=1}));this.attributeSet.dropDown.buttonSet.buttons.push(new j.Button(a.sketcher.id+"_button_attribute_radical_decrement",h.REMOVE_RADICAL,"Remove Radical",function(){a.sketcher.stateManager.setState(a.sketcher.stateManager.STATE_RADICAL);a.sketcher.stateManager.STATE_RADICAL.delta=-1}));this.attributeSet.dropDown.buttonSet.buttons.push(new j.Button(a.sketcher.id+
"_button_label_any",h.ANY_ELEMENT,"Any Element",function(){a.sketcher.stateManager.setState(a.sketcher.stateManager.STATE_ATOM_QUERY);a.sketcher.stateManager.STATE_ATOM_QUERY.mode=g.AtomQueryState.MODE_ANY}));this.attributeSet.dropDown.buttonSet.buttons.push(new j.Button(a.sketcher.id+"_button_label_rgroup",h.RGROUP,"Rgroup",function(){a.sketcher.stateManager.setState(a.sketcher.stateManager.STATE_ATOM_QUERY);a.sketcher.stateManager.STATE_ATOM_QUERY.mode=g.AtomQueryState.MODE_RGROUP}))};b.ToolbarManager.prototype.makeShapeSet=
function(a){this.shapeSet=new j.ButtonSet(a.sketcher.id+"_buttons_shape");this.buttonShape=new j.DummyButton(a.sketcher.id+"_button_shape",h.ARROW_SYNTHETIC,"Add Shape");this.shapeSet.buttons.push(this.buttonShape);this.shapeSet.addDropDown("More Shapes");this.shapeSet.dropDown.buttonSet.buttons.push(new j.Button(a.sketcher.id+"_button_lasso_arrow_synthetic",h.ARROW_SYNTHETIC,"Synthetic Arrow",function(){a.sketcher.stateManager.setState(a.sketcher.stateManager.STATE_SHAPE);a.sketcher.stateManager.STATE_SHAPE.shapeType=
g.ShapeState.ARROW_SYNTHETIC}));this.shapeSet.dropDown.buttonSet.buttons.push(new j.Button(a.sketcher.id+"_button_lasso_arrow_retrosynthetic",h.ARROW_RETROSYNTHETIC,"Retrosynthetic Arrow",function(){a.sketcher.stateManager.setState(a.sketcher.stateManager.STATE_SHAPE);a.sketcher.stateManager.STATE_SHAPE.shapeType=g.ShapeState.ARROW_RETROSYNTHETIC}));this.shapeSet.dropDown.buttonSet.buttons.push(new j.Button(a.sketcher.id+"_button_lasso_pusher_1",h.PUSHER_SINGLE,"Single Electron Pusher",function(){a.sketcher.stateManager.setState(a.sketcher.stateManager.STATE_PUSHER);
a.sketcher.stateManager.STATE_PUSHER.numElectron=1}));this.shapeSet.dropDown.buttonSet.buttons.push(new j.Button(a.sketcher.id+"_button_lasso_pusher_2",h.PUSHER_DOUBLE,"Electron Pair Pusher",function(){a.sketcher.stateManager.setState(a.sketcher.stateManager.STATE_PUSHER);a.sketcher.stateManager.STATE_PUSHER.numElectron=2}))}})(ChemDoodle,ChemDoodle.iChemLabs,ChemDoodle.io,ChemDoodle.structures,ChemDoodle.sketcher.actions,ChemDoodle.sketcher.gui,ChemDoodle.sketcher.gui.imageDepot,ChemDoodle.sketcher.gui.desktop,
ChemDoodle.sketcher.tools,ChemDoodle.sketcher.states,jQuery,document);
(function(a,d,f,c){f.Lasso=function(e){this.sketcher=e;this.atoms=[];this.shapes=[];this.bounds=void 0;this.mode=f.Lasso.MODE_LASSO;this.points=[];this.select=function(b,e){if(!this.block){d.SHIFT||this.empty();if(b)this.atoms=b.slice(0),this.shapes=e.slice(0);else{if(this.mode!==f.Lasso.MODE_LASSO_SHAPES){for(var j=[],m=0,g=this.sketcher.molecules.length;m<g;m++)for(var l=this.sketcher.molecules[m],n=0,i=l.atoms.length;n<i;n++){var o=l.atoms[n];this.mode===f.Lasso.MODE_RECTANGLE_MARQUEE?2===this.points.length&&
a.isBetween(o.x,this.points[0].x,this.points[1].x)&&a.isBetween(o.y,this.points[0].y,this.points[1].y)&&j.push(o):1<this.points.length&&a.isPointInPoly(this.points,o)&&j.push(o)}if(0===this.atoms.length)this.atoms=j;else{for(var k=[],m=0,g=this.atoms.length;m<g;m++)o=this.atoms[m],-1===c(o,j)?k.push(o):o.isLassoed=!1;m=0;for(g=j.length;m<g;m++)-1===c(j[m],this.atoms)&&k.push(j[m]);this.atoms=k}}j=[];m=0;for(g=this.sketcher.shapes.length;m<g;m++){for(var l=this.sketcher.shapes[m],o=l.getPoints(),p=
0<o.length,n=0,i=o.length;n<i;n++){var q=o[n];if(this.mode===f.Lasso.MODE_RECTANGLE_MARQUEE)if(2===this.points.length){if(!a.isBetween(q.x,this.points[0].x,this.points[1].x)||!a.isBetween(q.y,this.points[0].y,this.points[1].y)){p=!1;break}}else{p=!1;break}else if(1<this.points.length){if(!a.isPointInPoly(this.points,q)){p=!1;break}}else{p=!1;break}}p&&j.push(l)}if(0===this.shapes.length)this.shapes=j;else{n=[];m=0;for(g=this.shapes.length;m<g;m++)l=this.shapes[m],-1===c(l,j)?k.push(l):l.isLassoed=
!1;m=0;for(g=j.length;m<g;m++)-1===c(j[m],this.shapes)&&n.push(j[m]);this.shapes=n}}m=0;for(g=this.atoms.length;m<g;m++)this.atoms[m].isLassoed=!0;m=0;for(g=this.shapes.length;m<g;m++)this.shapes[m].isLassoed=!0;this.setBounds();this.bounds&&Infinity===this.bounds.minX&&this.empty();this.points=[];this.sketcher.stateManager.getCurrentState().clearHover();this.enableButtons();this.sketcher.repaint()}};this.enableButtons=function(){this.sketcher.useServices&&(0<this.atoms.length?(this.sketcher.toolbarManager.buttonClean.enable(),
this.sketcher.toolbarManager.buttonCalculate.enable(),this.sketcher.toolbarManager.buttonSave.enable()):(this.sketcher.toolbarManager.buttonClean.disable(),this.sketcher.toolbarManager.buttonCalculate.disable(),this.sketcher.toolbarManager.buttonSave.disable()))};this.setBounds=function(){if(this.isActive()){this.sketcher.repaint();this.bounds=new a.Bounds;for(var b=0,c=this.atoms.length;b<c;b++)this.bounds.expand(this.atoms[b].getBounds());b=0;for(c=this.shapes.length;b<c;b++)this.bounds.expand(this.shapes[b].getBounds());
this.bounds.minX-=5;this.bounds.minY-=5;this.bounds.maxX+=5;this.bounds.maxY+=5}else this.bounds=void 0};this.empty=function(){for(var a=0,c=this.atoms.length;a<c;a++)this.atoms[a].isLassoed=!1;a=0;for(c=this.shapes.length;a<c;a++)this.shapes[a].isLassoed=!1;this.atoms=[];this.shapes=[];this.bounds=void 0;this.enableButtons();this.sketcher.repaint()};this.draw=function(a,c){a.strokeStyle="blue";a.lineWidth=0.5/c.scale;if(0<this.points.length)if(this.mode===f.Lasso.MODE_RECTANGLE_MARQUEE){if(2===this.points.length){var d=
this.points[0],e=this.points[1];a.beginPath();a.rect(d.x,d.y,e.x-d.x,e.y-d.y);a.stroke()}}else if(1<this.points.length){a.beginPath();a.moveTo(this.points[0].x,this.points[0].y);d=1;for(e=this.points.length;d<e;d++)a.lineTo(this.points[d].x,this.points[d].y);a.closePath();a.stroke()}this.bounds&&(a.beginPath(),a.rect(this.bounds.minX,this.bounds.minY,this.bounds.maxX-this.bounds.minX,this.bounds.maxY-this.bounds.minY),a.stroke())};this.isActive=function(){return 0<this.atoms.length||0<this.shapes.length};
this.getFirstMolecule=function(){if(0<this.atoms.length)return this.sketcher.getMoleculeByAtom(this.atoms[0])};this.getAllPoints=function(){for(var a=this.atoms,c=0,d=this.shapes.length;c<d;c++)a=a.concat(this.shapes[c].getPoints());return a};this.addPoint=function(a){if(this.mode===f.Lasso.MODE_RECTANGLE_MARQUEE)if(2>this.points.length)this.points.push(a);else{var c=this.points[1];c.x=a.x;c.y=a.y}else this.points.push(a)};return!0};f.Lasso.MODE_LASSO="lasso";f.Lasso.MODE_LASSO_SHAPES="shapes";f.Lasso.MODE_RECTANGLE_MARQUEE=
"rectangle"})(ChemDoodle.math,ChemDoodle.monitor,ChemDoodle.sketcher.tools,jQuery.inArray);
(function(a,d,f,c,e,b,h,j,m){a.SketcherCanvas=function(a,d,j,i){this.isMobile=void 0===i.isMobile?f.supports_touch():i.isMobile;this.useServices=void 0===i.useServices?!1:i.useServices;this.oneMolecule=void 0===i.oneMolecule?!1:i.oneMolecule;this.includeToolbar=void 0===i.includeToolbar?!0:i.includeToolbar;this.id=a;this.toolbarManager=new c.gui.ToolbarManager(this);if(this.includeToolbar){this.toolbarManager.write();var o=this;document.getElementById(this.id)?h("#"+a+"_button_attribute_lonePair_decrement_icon").load(function(){o.toolbarManager.setup()}):
h(m).load(function(){o.toolbarManager.setup()});this.dialogManager=new c.gui.DialogManager(this)}this.stateManager=new c.states.StateManager(this);this.historyManager=new c.actions.HistoryManager(this);a&&this.create(a,d,j);this.specs.atoms_circleDiameter_2D=7;this.specs.atoms_circleBorderWidth_2D=0;this.isHelp=!1;this.helpPos=new e.Point(this.width-20,20);this.lastPinchScale=1;this.lastGestureRotate=0;this.inGesture=!1;this.oneMolecule?(a=new e.Molecule,a.atoms.push(new e.Atom),this.loadMolecule(a)):
(this.startAtom=new e.Atom("C",-10,-10),this.startAtom.isLone=!0,this.lasso=new b.Lasso(this));return!0};a.SketcherCanvas.prototype=new a._Canvas;a.SketcherCanvas.prototype.drawSketcherDecorations=function(a){a.save();a.translate(this.width/2,this.height/2);a.rotate(this.specs.rotateAngle);a.scale(this.specs.scale,this.specs.scale);a.translate(-this.width/2,-this.height/2);this.hovering&&this.hovering.drawDecorations(a,this.specs);this.startAtom&&-10!=this.startAtom.x&&!this.isMobile&&this.startAtom.draw(a,
this.specs);this.tempAtom&&(a.strokeStyle="#00FF00",a.fillStyle="#00FF00",a.lineWidth=1,a.beginPath(),a.moveTo(this.hovering.x,this.hovering.y),d.contextHashTo(a,this.hovering.x,this.hovering.y,this.tempAtom.x,this.tempAtom.y,2,2),a.stroke(),a.beginPath(),a.arc(this.tempAtom.x,this.tempAtom.y,3,0,2*j.PI,!1),a.fill(),this.tempAtom.isOverlap&&(a.strokeStyle="#C10000",a.lineWidth=1.2,a.beginPath(),a.arc(this.tempAtom.x,this.tempAtom.y,7,0,2*j.PI,!1),a.stroke()));if(this.tempRing){a.strokeStyle="#00FF00";
a.fillStyle="#00FF00";a.lineWidth=1;a.beginPath();if(this.hovering instanceof e.Atom){a.moveTo(this.hovering.x,this.hovering.y);d.contextHashTo(a,this.hovering.x,this.hovering.y,this.tempRing[0].x,this.tempRing[0].y,2,2);for(var b=1,c=this.tempRing.length;b<c;b++)d.contextHashTo(a,this.tempRing[b-1].x,this.tempRing[b-1].y,this.tempRing[b].x,this.tempRing[b].y,2,2);d.contextHashTo(a,this.tempRing[this.tempRing.length-1].x,this.tempRing[this.tempRing.length-1].y,this.hovering.x,this.hovering.y,2,2)}else if(this.hovering instanceof
e.Bond){var b=this.hovering.a2,f=this.hovering.a1;this.tempRing[0]===this.hovering.a1&&(b=this.hovering.a1,f=this.hovering.a2);a.moveTo(b.x,b.y);d.contextHashTo(a,b.x,b.y,this.tempRing[1].x,this.tempRing[1].y,2,2);b=2;for(c=this.tempRing.length;b<c;b++)d.contextHashTo(a,this.tempRing[b-1].x,this.tempRing[b-1].y,this.tempRing[b].x,this.tempRing[b].y,2,2);d.contextHashTo(a,this.tempRing[this.tempRing.length-1].x,this.tempRing[this.tempRing.length-1].y,f.x,f.y,2,2)}a.stroke()}this.lasso&&this.lasso.draw(a,
this.specs);this.stateManager.getCurrentState().draw&&this.stateManager.getCurrentState().draw(a);a.restore()};a.SketcherCanvas.prototype.drawChildExtras=function(a){this.drawSketcherDecorations(a);if(!this.hideHelp){var b=a.createRadialGradient(this.width-20,20,10,this.width-20,20,2);b.addColorStop(0,"#00680F");b.addColorStop(1,"#FFFFFF");a.fillStyle=b;a.beginPath();a.arc(this.helpPos.x,this.helpPos.y,10,0,2*j.PI,!1);a.fill();this.isHelp&&(a.lineWidth=2,a.strokeStyle="black",a.stroke());a.fillStyle=
this.isHelp?"red":"black";a.textAlign="center";a.textBaseline="middle";a.font="14px sans-serif";a.fillText("?",this.helpPos.x,this.helpPos.y)}this.paidToHideTrademark||(b=a.measureText("ChemDoodle").width,a.textAlign="left",a.textBaseline="bottom",a.font="14px sans-serif",a.fillStyle="rgba(0, 60, 0, 0.5)",a.fillText("ChemDoodle",this.width-b-13,this.height-4),a.font="8px sans-serif",a.fillText("\u00ae",this.width-13,this.height-12))};a.SketcherCanvas.prototype.scaleEvent=function(a){a.op=new e.Point(a.p.x,
a.p.y);1!==this.specs.scale&&(a.p.x=this.width/2+(a.p.x-this.width/2)/this.specs.scale,a.p.y=this.height/2+(a.p.y-this.height/2)/this.specs.scale)};a.SketcherCanvas.prototype.checkScale=function(){0.5>this.specs.scale?this.specs.scale=0.5:10<this.specs.scale&&(this.specs.scale=10)};a.SketcherCanvas.prototype.click=function(a){this.scaleEvent(a);this.stateManager.getCurrentState().click(a)};a.SketcherCanvas.prototype.rightclick=function(a){this.scaleEvent(a);this.stateManager.getCurrentState().rightclick(a)};
a.SketcherCanvas.prototype.dblclick=function(a){this.scaleEvent(a);this.stateManager.getCurrentState().dblclick(a)};a.SketcherCanvas.prototype.mousedown=function(a){this.scaleEvent(a);this.stateManager.getCurrentState().mousedown(a)};a.SketcherCanvas.prototype.rightmousedown=function(a){this.scaleEvent(a);this.stateManager.getCurrentState().rightmousedown(a)};a.SketcherCanvas.prototype.mousemove=function(a){this.isHelp=!1;10>a.p.distance(this.helpPos)&&(this.isHelp=!0);this.scaleEvent(a);this.stateManager.getCurrentState().mousemove(a)};
a.SketcherCanvas.prototype.mouseout=function(a){this.scaleEvent(a);this.stateManager.getCurrentState().mouseout(a)};a.SketcherCanvas.prototype.mouseover=function(a){this.scaleEvent(a);this.stateManager.getCurrentState().mouseover(a)};a.SketcherCanvas.prototype.mouseup=function(a){this.scaleEvent(a);this.stateManager.getCurrentState().mouseup(a)};a.SketcherCanvas.prototype.rightmouseup=function(a){this.scaleEvent(a);this.stateManager.getCurrentState().rightmouseup(a)};a.SketcherCanvas.prototype.mousewheel=
function(a,b){this.scaleEvent(a);this.stateManager.getCurrentState().mousewheel(a,b)};a.SketcherCanvas.prototype.drag=function(a){this.scaleEvent(a);this.stateManager.getCurrentState().drag(a)};a.SketcherCanvas.prototype.keydown=function(a){this.scaleEvent(a);this.stateManager.getCurrentState().keydown(a)};a.SketcherCanvas.prototype.keypress=function(a){this.scaleEvent(a);this.stateManager.getCurrentState().keypress(a)};a.SketcherCanvas.prototype.keyup=function(a){this.scaleEvent(a);this.stateManager.getCurrentState().keyup(a)};
a.SketcherCanvas.prototype.touchstart=function(a){if(a.originalEvent.touches&&1<a.originalEvent.touches.length){if(this.tempAtom||this.tempRing)this.hovering=this.tempRing=this.tempAtom=void 0,this.repaint();this.lastPoint=void 0}else this.scaleEvent(a),this.stateManager.getCurrentState().mousemove(a),this.stateManager.getCurrentState().mousedown(a)};a.SketcherCanvas.prototype.touchmove=function(a){this.scaleEvent(a);this.inGesture||this.stateManager.getCurrentState().drag(a)};a.SketcherCanvas.prototype.touchend=
function(a){this.scaleEvent(a);this.stateManager.getCurrentState().mouseup(a);this.hovering&&(this.stateManager.getCurrentState().clearHover(),this.repaint())};a.SketcherCanvas.prototype.gesturechange=function(a){this.inGesture=!0;if(1!==a.originalEvent.scale-this.lastPinchScale){if(!this.lasso||!this.lasso.isActive())this.specs.scale*=a.originalEvent.scale/this.lastPinchScale,this.checkScale();this.lastPinchScale=a.originalEvent.scale}if(0!==this.lastGestureRotate-a.originalEvent.rotation){var b=
(this.lastGestureRotate-a.originalEvent.rotation)/180*j.PI;if(this.parentAction){this.parentAction.dif+=b;for(var d=0,f=this.parentAction.ps.length;d<f;d++){var h=this.parentAction.ps[d],k=this.parentAction.center.distance(h),m=this.parentAction.center.angle(h)+b;h.x=this.parentAction.center.x+k*j.cos(m);h.y=this.parentAction.center.y-k*j.sin(m)}d=0;for(f=this.molecules.length;d<f;d++)this.molecules[d].check();this.lasso&&this.lasso.isActive()&&this.lasso.setBounds()}else d=this.lasso&&this.lasso.isActive()?
this.lasso.getAllPoints():this.getAllPoints(),f=this.lasso&&this.lasso.isActive()?new e.Point((this.lasso.bounds.minX+this.lasso.bounds.maxX)/2,(this.lasso.bounds.minY+this.lasso.bounds.maxY)/2):new e.Point(this.width/2,this.height/2),this.parentAction=new c.actions.RotateAction(d,b,f),this.historyManager.pushUndo(this.parentAction);this.lastGestureRotate=a.originalEvent.rotation}this.repaint()};a.SketcherCanvas.prototype.gestureend=function(){this.inGesture=!1;this.lastPinchScale=1;this.lastGestureRotate=
0;this.parentAction=void 0}})(ChemDoodle,ChemDoodle.extensions,ChemDoodle.featureDetection,ChemDoodle.sketcher,ChemDoodle.structures,ChemDoodle.sketcher.tools,jQuery,Math,window);
